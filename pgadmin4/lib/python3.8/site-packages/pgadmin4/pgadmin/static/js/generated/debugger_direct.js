define(["translations","pgadmin.browser.endpoints","pgadmin.browser.utils","pgadmin.browser.messages"],(function(e,t,r,n){return function(e){function t(t){for(var n,o,s=t[0],l=t[1],u=t[2],c=0,f=[];c<s.length;c++)o=s[c],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(d&&d(t);f.length;)f.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,s=1;s<r.length;s++){var l=r[s];0!==a[l]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={7:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",Object.defineProperty(o,"p",{get:function(){try{if("function"!=typeof getChunkURL)throw new Error("WebpackRequireFrom: 'getChunkURL' is not a function or not available at runtime. See https://github.com/agoldis/webpack-require-from#troubleshooting");return getChunkURL()}catch(e){return""}}});var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=l;return i.push([316,2,3,1,0]),r()}({100:function(t,r){t.exports=e},101:function(e,r){e.exports=t},120:function(e,t,r){"use strict";r(136),r(9),Object.defineProperty(t,"__esModule",{value:!0}),t.initializeToolbar=function(e,t){l=e,a.default.each(u,(function(e){c(e)})),a.default.each(d,(function(e){c(e)})),e.on(t.EVENT.BUTTON,(function(e){"name"in e&&e.name===(0,n.default)("Query Tool")?i.default.DataGrid.show_query_tool("",i.default.Browser.tree.selected()):"name"in e&&e.name===(0,n.default)("View Data")?i.default.DataGrid.show_data_grid({mnuid:3},i.default.Browser.tree.selected()):"name"in e&&e.name===(0,n.default)("Filtered Rows")?i.default.DataGrid.show_filtered_row({mnuid:4},i.default.Browser.tree.selected()):"name"in e&&e.name===(0,n.default)("Search objects")&&i.default.SearchObjects.show_search_objects("",i.default.Browser.tree.selected())}))},t.enable=function(e,t){e in s?l.buttonEnable(e,t):console.warn("Developer warning: No tool button found with label: "+e)};var n=o(r(2)),a=o(r(1)),i=o(r(3));function o(e){return e&&e.__esModule?e:{default:e}}var s={},l=null,u=[{label:(0,n.default)("Query Tool"),ariaLabel:(0,n.default)("Query Tool"),btnClass:"pg-font-icon icon-query-tool",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,n.default)("View Data"),ariaLabel:(0,n.default)("View Data"),btnClass:"pg-font-icon sql-icon-lg icon-view-data",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,n.default)("Filtered Rows"),ariaLabel:(0,n.default)("Filtered Rows"),btnClass:"pg-font-icon icon-filter-table-toolbar",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,n.default)("Search objects"),ariaLabel:(0,n.default)("Search objects"),btnClass:"fa fa-search",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1}],d=[];function c(e){(!(e.label in s)||a.default.findIndex(l._buttonList,{name:e.label})<0)&&(l.addButton(e.label,e.btnClass,e.text,e.label,e.toggled,e.toggleClass,e.parentClass,e.enabled,e.ariaLabel),s[e.label]=e)}},121:function(e,t,r){"use strict";r(7),r(14),r(32),r(6);var n=o(r(0)),a=o(r(112)),i=r(16);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dialogContainer=t,this.tabSwitching=!1,this.tabs=this.dialogContainer.find(".nav-tabs:visible"),this.tabs.length>0&&(this.tabs=this.tabs[0]),this.dialogTabBackward=(0,i.parseShortcutValue)(r),this.dialogTabForward=(0,i.parseShortcutValue)(n),(0,a.default)(this.dialogContainer[0]).bind(this.dialogTabBackward,this.onKeyboardEvent.bind(this)),(0,a.default)(this.dialogContainer[0]).bind(this.dialogTabForward,this.onKeyboardEvent.bind(this))}var t,r,o;return t=e,(r=[{key:"onKeyboardEvent",value:function(e,t){var r=this.dialogContainer.find(".tab-content:first > .tab-pane.active:first:visible"),n=this.isActivePaneHasChildTabs(r);this.tabSwitching||(this.tabSwitching=!0,n&&this.navigate(t,n.childTab,n.childTabPane,e)||this.navigate(t,this.tabs,r,e))}},{key:"isActivePaneHasChildTabs",value:function(e){var t=e.find(".nav-tabs:first:visible");return t.length>0?{childTab:t,childTabPane:e.find(".tab-content:first > .tab-pane.active:first:visible")}:null}},{key:"navigate",value:function(e,t,r,n){return e==this.dialogTabBackward?this.navigateBackward(t,r,n):e==this.dialogTabForward&&this.navigateForward(t,r,n)}},{key:"navigateBackward",value:function(e,t,r){var a,o,s=this,l=(0,n.default)(e).find("li").has("a.active").prev("li");return l.length>0?(l.find("a").tab("show"),(o=(a=t.prev()).find(".tab-content:first > .tab-pane.active:first:visible")).length>0?(0,i.findAndSetFocus)(o):(0,i.findAndSetFocus)(a),setTimeout((function(){s.tabSwitching=!1}),200),r.stopPropagation(),!0):(this.tabSwitching=!1,!1)}},{key:"navigateForward",value:function(e,t,r){var a,o,s=this,l=(0,n.default)(e).find("li").has("a.active").next("li");return l.length>0?(l.find("a").tab("show"),(o=(a=t.next()).find(".tab-content:first > .tab-pane.active:first:visible")).length>0?(0,i.findAndSetFocus)(o):(0,i.findAndSetFocus)(a),setTimeout((function(){s.tabSwitching=!1}),200),r.stopPropagation(),!0):(this.tabSwitching=!1,!1)}},{key:"detach",value:function(){(0,a.default)(this.dialogContainer[0]).unbind(this.dialogTabBackward),(0,a.default)(this.dialogContainer[0]).unbind(this.dialogTabForward)}}])&&s(t.prototype,r),o&&s(t,o),e}();e.exports={dialogTabNavigator:l}},144:function(e,t,r){"use strict";(function(e){r(7),r(34),r(12),r(91),r(18),r(14),r(134),r(32),r(38),r(22),r(92),r(4),r(8),r(21),r(76),r(41),r(6),Object.defineProperty(t,"__esModule",{value:!0}),t.isValidTreeNodeData=t.Tree=t.TreeNode=void 0;var n=r(16),a=o(r(0)),i=o(r(11));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}var g=function(){function e(t,r,n,a){c(this,e),this.id=t,this.data=r,this.setParent(a),this.children=[],this.domNode=n}return p(e,[{key:"hasParent",value:function(){return null!==this.parentNode&&void 0!==this.parentNode}},{key:"parent",value:function(){return this.parentNode}},{key:"setParent",value:function(e){this.parentNode=e,this.path=this.id,null!=e&&void 0!==e.path&&(this.path=e.path+"."+this.id)}},{key:"getData",value:function(){if(void 0!==this.data)return null===this.data?null:Object.assign({},this.data)}},{key:"getHtmlIdentifier",value:function(){return this.domNode}},{key:"reload",value:function(e){var t=this;return new Promise((function(r){t.unload(e).then((function(){e.aciTreeApi.setInode(t.domNode),e.aciTreeApi.deselect(t.domNode),setTimeout((function(){e.selectNode(t.domNode)}),0),r()}))}))}},{key:"unload",value:function(e){var t=this;return new Promise((function(r,n){t.children=[],e.aciTreeApi.unload(t.domNode,{success:function(){r(!0)},fail:function(){n()}})}))}},{key:"open",value:function(e,t){var r=this;return new Promise((function(n,a){!t||null!=r.domNode&&void 0!==r.domNode?e.aciTreeApi.isOpen(r.domNode)?n(!0):e.aciTreeApi.open(r.domNode,{success:function(){n(!0)},fail:function(){a(!0)}}):n(!0)}))}},{key:"ancestorNode",value:function(e){for(var t=this;t.hasParent();)if(e(t=t.parent()))return t;return null}},{key:"anyFamilyMember",value:function(e){return!!e(this)||null!==this.ancestorNode(e)}},{key:"anyParent",value:function(e){return null!==this.ancestorNode(e)}}]),e}();t.TreeNode=g;var _=function(){function t(){c(this,t),this.rootNode=new g(void 0,{}),this.aciTreeApi=void 0,this.draggableTypes={}}return p(t,[{key:"registerDraggableType",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"object"==d(e)?Object.keys(e).forEach((function(r){t.registerDraggableType(r,e[r])})):null!=r&&e.replace(/ +/," ").split(" ").forEach((function(e){t.draggableTypes[e]=r}))}},{key:"getDraggable",value:function(e){return this.draggableTypes[e]?this.draggableTypes[e]:null}},{key:"prepareDraggable",value:function(t,r){var n=this.getDraggable(t._type);null!=n&&r.find(".aciTreeItem").attr("draggable",!0)[0].addEventListener("dragstart",(function(i){var o=n(t,r);if("string"==typeof o?o={text:o,cur:{from:o.length,to:o.length}}:o.cur||(o=l(l({},o),{},{cur:{from:o.text.length,to:o.text.length}})),i.dataTransfer.setData("text",JSON.stringify(o)),i.dataTransfer.dropEffect&&(i.dataTransfer.dropEffect="move"),i.dataTransfer.setDragImage){var s=(0,a.default)('\n              <div class="drag-tree-node">\n                <span>'.concat(e.escape(o.text),"</span>\n              </div>"));(0,a.default)("body .drag-tree-node").remove(),(0,a.default)("body").append(s),i.dataTransfer.setDragImage(s[0],0,0)}}))}},{key:"addNewNode",value:function(e,t,r,n){var a=this.findNode(n);return this.createOrUpdateNode(e,t,a,r)}},{key:"findNode",value:function(e){return null==e||0===e.length?this.rootNode:function(e,t){if(null===t)return e;return function e(r){if(void 0!==r.path&&void 0!==t&&!t.startsWith(r.path))return null;for(var n=0,a=r.children.length;n<a;n++){var i=e(r.children[n]);if(null!==i)return i}return r.path===t?r:null}(e)}(this.rootNode,e.join("."))}},{key:"findNodeWithToggle",value:function(e){var t=this;if(null==e||!Array.isArray(e))return Promise.reject();e=e.join(".");var r=function(t){return void 0!==t&&void 0!==e&&(e.startsWith(t+".")||e===t)};return function n(a){return new Promise((function(i,o){null!=e&&0!==e.length||i(null),void 0===a.path||r(a.path)?a.path===e?i(a):a.open(t,!0).then((function(){for(var e=0,t=a.children.length;e<t;e++){var s=a.children[e];if(r(s.path))return void i(n(s))}o(null)})).catch((function(){o(null)})):o(null)}))}(this.rootNode)}},{key:"findNodeByDomElement",value:function(e){var t=this.translateTreeNodeIdFromACITree(e);if(t&&t[0])return this.findNode(t)}},{key:"selected",value:function(){return this.aciTreeApi.selected()}},{key:"scrollTo",value:function(e){e.scrollIntoView()}},{key:"selectNode",value:function(e,t){this.aciTreeApi.select(e),t&&this.scrollTo(e[0])}},{key:"createOrUpdateNode",value:function(e,t,r,n){var a=[e];null!=r&&(a=[r.path,e]);var i=this.findNode(a);if(null!==i)return i.data=t,i.domNode=n,i;var o=new g(e,t,n,r);return r===this.rootNode&&(o.parentNode=null),null!=r&&r.children.push(o),o}},{key:"unloadNode",value:function(e,t,r,n){var a=[e],i=this.findNode(n);null!=i&&(a=[i.path,e]);var o=this.findNode(a);o&&(o.children=[])}},{key:"register",value:function(e){var t=this;e.on("acitree",function(e,t,r,n){if(t.isItem(r)&&-1!=["added","idset","beforeunload"].indexOf(n)){var a=t.getId(r),o=t.itemData(r),s=this.translateTreeNodeIdFromACITree(t.parent(r));"beforeunload"===n?this.unloadNode(a,o,r,s):("added"===n&&this.prepareDraggable(o,r),this.addNewNode(a,o,r,s)),o.errmsg&&i.default.error(o.errmsg)}}.bind(this)),this.aciTreeApi=e.aciTree("api");var r=function(e){var r=t.aciTreeApi.itemFrom(e.target);r.length&&(e.ctrlKey&&t.aciTreeApi.select(r),(0,a.default)(r).on("contextmenu:visible",(function(){(0,a.default)(r).trigger("blur"),(0,a.default)(r).off("contextmenu:visible")})))};e.off("mousedown",r).on("mousedown",r)}},{key:"translateTreeNodeIdFromACITree",value:function(e){for(var t=e,r=[];null!=t&&t.length>0&&(r.unshift(this.aciTreeApi.getId(t)),this.aciTreeApi.hasParent(t));)t=this.aciTreeApi.parent(t);return r}}]),t}();t.Tree=_;var b=n.isValidData;t.isValidTreeNodeData=b}).call(this,r(1))},145:function(e,t){e.exports=r},159:function(e,t,r){"use strict";r(46),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.showOnScroll){var t=n.default.fn.select2.amd.require("select2/utils"),r=function(e,t){this.$element=e,this.options=t,this._dataToConvert=t.get("data")||[]},i=null;i=null!=e.data?n.default.fn.select2.amd.require("select2/data/array"):n.default.fn.select2.amd.require("select2/data/select"),t.Extend(r,i),r.prototype.query=function(e,t){var r=[],a=this;e.page||(e.page=1);this.$element.children().each((function(){var t=(0,n.default)(this);if(t.is("option")||t.is("optgroup")){var i=a.item(t),o=a.matches(e,i);null!==o&&r.push(o)}})),t({results:r.slice(20*(e.page-1),20*e.page),pagination:{more:r.length>=20*e.page}})},e.minimumInputLength>0&&(r=t.Decorate(r,n.default.fn.select2.amd.require("select2/data/minimumInputLength"))),e.maximumInputLength>0&&(r=t.Decorate(r,n.default.fn.select2.amd.require("select2/data/maximumInputLength"))),e.maximumSelectionLength>0&&(r=t.Decorate(r,n.default.fn.select2.amd.require("select2/data/maximumSelectionLength"))),e.tags&&(r=t.Decorate(r,n.default.fn.select2.amd.require("select2/data/tags"))),null==e.tokenSeparators&&null==e.tokenizer||(r=t.Decorate(r,n.default.fn.select2.amd.require("select2/data/tokenizer"))),e.dataAdapter=r,a.default.isUndefined(e.ajax)&&(e.ajax={})}return e},r(119);var n=i(r(0)),a=i(r(1));function i(e){return e&&e.__esModule?e:{default:e}}},16:function(e,t,r){"use strict";r(7),r(12),r(18),r(23),r(28),r(29),r(58),r(4),r(33),r(143),r(8),r(57),r(21),r(6),Object.defineProperty(t,"__esModule",{value:!0}),t.parseShortcutValue=function(e){var t="";e.alt&&(t+="alt+");e.shift&&(t+="shift+");e.control&&(t+="ctrl+");return t+=e.key.char.toLowerCase()},t.handleKeyNavigation=function(e){var t=(0,i.default)(e.currentTarget).find(".wizard-header"),r=(0,i.default)(e.currentTarget).find(".wizard-footer"),n=(0,i.default)(e.currentTarget).find(".select-row-cell:first"),a=(0,i.default)(e.currentTarget).find(".select-row-cell:last"),o=(0,i.default)(t).find("button:enabled:first"),s=(0,i.default)(t).find("button:enabled:last"),l=(0,i.default)(r).find("button:enabled:last"),u=(0,i.default)(r).find("button:enabled:first");e.shiftKey&&9===e.keyCode?o&&(0,i.default)(o).is((0,i.default)(e.target))?l&&((0,i.default)(l).focus(),e.preventDefault(),e.stopPropagation()):(0,i.default)(u).is((0,i.default)(e.target))&&((0,i.default)(n).find(".custom-control-input").is(":visible")?((0,i.default)(a).find(".custom-control-input").focus(),e.preventDefault(),e.stopPropagation()):(0,i.default)(e.currentTarget).find(".wizard-content").find(".CodeMirror-scroll").is(":visible")&&(0,i.default)(s).focus()):9===e.keyCode?l&&(0,i.default)(l).is((0,i.default)(e.target))?((0,i.default)(o).focus(),e.preventDefault(),e.stopPropagation()):"Name"==e.target.innerText?((0,i.default)(n).find(".custom-control-input").is(":visible")?(0,i.default)(n).find(".custom-control-input").focus():(0,i.default)(u).focus(),e.preventDefault(),e.stopPropagation()):"DIV"==e.target.tagName?((0,i.default)(e.currentTarget).find(".custom-control-input:first").trigger("focus"),e.preventDefault(),e.stopPropagation()):"TEXTAREA"==e.target.tagName&&(0,i.default)(u).focus():27===e.keyCode&&(0,i.default)(t).find("button.ajs-close").click()},t.findAndSetFocus=function(e){if(0==e.length)return;setTimeout((function(){var t=e.find("button.fa-plus:first");0==t.length&&(t=e.find("\n          .pgadmin-controls:first .btn:not(.toggle),\n          .pgadmin-controls:first,\n          .ajs-commands:first,\n          .CodeMirror-scroll,\n          .pgadmin-wizard").find('*[tabindex]:not([tabindex="-1"]),input:enabled')),t.length>0?t[0].focus():e[0].focus()}),200)},t.getEpoch=function(e){var t=e||new Date;return parseInt(t.getTime()/1e3)},t.getGCD=function(e){var t=function e(t,r){return 0==t?r:e(r%t,t)},r=e.length;if(r<=2)return t(e[0],e[1]);for(var n=e[0],a=1;a<r;a++)n=t(e[a],n);return n},t.getMod=function(e,t){return(e%t+t)%t},t.parseFuncParams=function(e){var t=[],r="",n="";if(e.endsWith("()"))r=e.substring(0,e.length-2);else if(e.endsWith(")")){if(!e.endsWith("()")&&e.endsWith(")")){var a=0,i=e.length;for(a=e.length-2;a>=0;){if("("==e[a]){i=a;break}if('"'==e[a])for(a--;'"'!=e[a];)a--;a--}r=e.substring(0,i),n=e.substring(i+1,e.length-1);var o=0,s="",l=["IN","OUT","INOUT","VARIADIC"];for(a=0;a<n.length;){if('"'==n[a])for(a++;'"'!=n[a];)a++;else" "==n[a]?(""==s||l.indexOf(s)>-1)&&(s=n.substring(o,a),o=a+1):","==n[a]&&(t.push([s,n.substring(o,a)]),s="",o=a+1);a++}t.push([s,n.substring(o)])}}else r=e;return{func_name:r,param_string:n,params:t}},t.quote_ident=s,t.fully_qualify=function(e,t,r){var n=a.getTreeNodeHierarchyFromIdentifier.call(e,r),i="";void 0!==n.schema?i=s(n.schema._label):void 0!==n.view?i=s(n.view._label):void 0!==n.catalog&&(i=s(n.catalog._label));void 0!==n.package&&"package"!=t._type&&(""==i?i=s(n.package._label):i+="."+s(n.package._label));return""!=i?i+"."+s(t._label):s(t._label)},t.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},t.titleize=function(e){return""===e||null===e?e:e.split(" ").map((function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()})).join(" ")},t.sprintf=function(e){try{var t=arguments;return e.split("%s").map((function(e,r){return r>0?r<t.length?[t[r],e].join(""):["%s",e].join(""):e})).join("")}catch(t){return console.error(t),e}},t.CSVToArray=function(e,t,r){t=t||",",r=r||'"';var n=new RegExp("(\\"+t+"|\\r?\\n|\\r|^)"+('"'==r?'(?:"([^"]*(?:""[^"]*)*)"|':"(?:'([^']*(?:''[^']*)*)'|")+('"'==r?'([^"\\'+t+"\\r\\n]*))":"([^'\\"+t+"\\r\\n]*))"),"gi"),a=[[]],i=null;for(;i=n.exec(e);){var o,s=i[1];s.length&&s!==t&&a.push([]),o=i[2]?i[2].replace(new RegExp(r+r,"g"),r):i[3],a[a.length-1].push(o)}return a},t.isString=t.isFunction=t.isValidData=void 0;var n=o(r(1)),a=r(39),i=o(r(0));function o(e){return e&&e.__esModule?e:{default:e}}t.isValidData=function(e){return!n.default.isUndefined(e)&&!n.default.isNull(e)};t.isFunction=function(e){return n.default.isFunction(e)};function s(e){var t=!1;return isNaN(parseInt(e))||(t=!0),e.search(/[^a-z0-9_]/g)>-1&&(e=e.replace(/"/g,'""'),t=!0),t?'"'.concat(e,'"'):e}t.isString=function(e){return n.default.isString(e)}},161:function(e,t,r){"use strict";r(4),r(8),Object.defineProperty(t,"__esModule",{value:!0}),t.getHelpUrl=function(e,t,r,n){var a=Math.floor(r/1e4),i=Math.floor(r/100)-100*a,o=r-(1e4*a+100*i),s="",l=a+"."+i;"ppas"==n&&a<10?l=a+"."+i+"."+o:"pg"==n&&a>=10&&(l=a);"/"!=(s=e.replace("$VERSION$",l)).substr(-1)&&(s+="/");return s+t}},162:function(e,t,r){"use strict";r(20);var n,a=(n=r(1))&&n.__esModule?n:{default:n};e.exports={generate_url:function(e,t,r,n,i,o){var s="";return a.default.each(a.default.sortBy(a.default.pick(t,i),(function(e){return e.priority})),(function(e){s="".concat(s,"/").concat(encodeURI(e._id))})),s=o?"".concat(s,"/").concat(o):"".concat(s,"/"),"".concat(e).concat(n,"/").concat(r).concat(s)}}},163:function(e,t,r){"use strict";r(7),r(12),r(18),r(43),r(4),r(57),r(21),r(6),Object.defineProperty(t,"__esModule",{value:!0}),t.browserTreeState=t.pgBrowser=void 0;var n=l(r(1)),a=l(r(0)),i=l(r(5)),o=l(r(2)),s=l(r(3));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=s.default.Browser=s.default.Browser||{};t.pgBrowser=c;var f=c.browserTreeState=c.browserTreeState||{};t.browserTreeState=f,n.default.extend(c.browserTreeState,{parent:"server",orig_parent:"server_group",stored_state:{},last_state:{},current_state:{},init:function(){var e=c.get_preference("browser","browser_tree_state_save_interval");n.default.isUndefined(e)||-1===e.value?n.default.isUndefined(e)||a.default.ajax({url:(0,i.default)("settings.reset_tree_state"),type:"DELETE"}).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,o.default)('Error resetting the tree saved state."'),t)})):(setInterval(this.save_state,1e3*e.value),this.fetch_state.apply(this),c.Events.on("pgadmin:browser:tree:expand-from-previous-tree-state",this.expand_from_previous_state,this),c.Events.on("pgadmin:browser:tree:remove-from-tree-state",this.remove_from_cache,this),c.Events.on("pgadmin:browser:tree:update-tree-state",this.update_cache,this))},save_state:function(){var e=c.browserTreeState;e.last_state!=JSON.stringify(e.current_state)&&a.default.ajax({url:(0,i.default)("settings.save_tree_state"),type:"POST",contentType:"application/json",data:JSON.stringify(e.current_state)}).done((function(){e.last_state=JSON.stringify(e.current_state)})).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,o.default)('Error saving the tree state."'),t)}))},fetch_state:function(){var e=this;a.default.ajax({url:(0,i.default)("settings.get_tree_state"),type:"GET",dataType:"json",contentType:"application/json"}).done((function(t){e.stored_state=t})).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,o.default)("Error fetching the tree state."),t)}))},update_cache:function(e){var t,r=e&&c.tree.itemData(e),a=(r&&c.Nodes[r._type]).getTreeNodeHierarchy(e),i=c.tree.pathId(e),o=i.join(),s=[],l=-1;if(c.tree.hasParent(e)&&this.parent in a){if(t=a[this.parent]._id,c.tree.isOpen(e)){i.push(r.id),s=i.join(),t in this.current_state||(this.current_state[t]={paths:[],selected:{},conn_status:{},is_opened:{}});var u=n.default.find(this.current_state[t].paths,(function(e){return-1!==e.search(s)}));n.default.isUndefined(u)&&(n.default.isUndefined(this.current_state[t].paths)?this.current_state[t].paths=[]:l=this.current_state[t].paths.indexOf(o),-1!==l?this.current_state[t].paths[l]=s:this.current_state[t].paths.push(s))}this.update_database_status(e),this.update_current_selected_item(a)}},remove_from_cache:function(e){var t=this,r=t.stored_state||{},a=e&&c.tree.itemData(e),i=a&&c.Nodes[a._type],o=i&&i.getTreeNodeHierarchy(e);if(null!==o&&c.tree.hasParent(e)&&o.hasOwnProperty(t.parent)){var s=o&&o[t.parent]._id,l=o&&o[t.orig_parent].id;if(this.update_database_status(e),a._type!=t.parent&&"database"!=a._type){if(c.tree.isClosed(e)){var u=t.current_state[s].paths,d=void 0;if(o.hasOwnProperty("database")&&(d=o.database.id),!n.default.isUndefined(u)&&!n.default.isUndefined(u.length)){var f=0,p=void 0;n.default.each(u,(function(e){if(!n.default.isUndefined(e)){var r=e.split(",");if(-1!==r.indexOf(a.id)&&(void 0===d||void 0!==d&&-1!==r.indexOf(d))){var i=r.indexOf(a.id);r.splice(i),(p=r.join())==l?t.current_state[s].paths.splice(e,1):t.current_state[s].paths[f]=p}f++}}))}}}else s in r&&"paths"in r[s]&&(r[s].paths=t.current_state[s].paths,t.save_state())}},expand_from_previous_state:function(e){var t=this,r=t.stored_state||{},a=e&&c.tree.itemData(e),i=a&&c.Nodes[a._type],o=i&&i.getTreeNodeHierarchy(e);if(null!==o&&c.tree.hasParent(e)&&o.hasOwnProperty(t.parent)&&(a._type!=t.parent||!1!==c.tree.isOpen(e))){var s=r[o[t.parent]._id];if(!("database"==a._type&&s&&"conn_status"in s&&"is_opened"in s)||0!==s.conn_status[a.id]&&0!==s.is_opened[a.id]&&a.id in s.is_opened){if(!n.default.isUndefined(s)&&"paths"in s&&!n.default.isUndefined(s.paths.length)){var l=u(s.paths),d=void 0;o.hasOwnProperty("database")&&(d=o.database.id),n.default.each(l,(function(i){if(!n.default.isUndefined(i)){var s=i.split(",");if(-1!==s.indexOf(a.id)&&(void 0===d||void 0!==d&&-1!==s.indexOf(d))){var l=s.indexOf(a.id);if(c.tree.toggle(e),l==s.length-1){var u=r[o[t.parent]._id].paths.indexOf(i);r[o[t.parent]._id].paths.splice(u,1)}}}}))}this.select_tree_item(e)}}},update_database_status:function(e){var t=e&&c.tree.itemData(e),r=(t&&c.Nodes[t._type]).getTreeNodeHierarchy(e);if(r.hasOwnProperty("database")){var n=r.database.id,a=r&&r[this.parent]._id;a in this.current_state&&"selected"in this.current_state[a]&&(r.database.connected?this.current_state[a].conn_status[n]=1:this.current_state[a].conn_status[n]=0,"database"==t._type&&(c.tree.isOpen(e)?this.current_state[a].is_opened[n]=1:this.current_state[a].is_opened[n]=0))}},update_current_selected_item:function(e){if(this.parent in e){var t=e&&e[this.parent]._id,r=c.tree.itemData(c.tree.selected()),a=void 0;r=r?r.id:void 0,e.hasOwnProperty("database")&&(a=e.database.id),t in this.current_state&&"selected"in this.current_state[t]&&!n.default.isUndefined(r)&&(this.current_state[t].selected[e[this.parent].id]=r,n.default.isUndefined(a)||(this.current_state[t].selected[a]=r))}},select_tree_item:function(e){var t=this.stored_state||{},r=e&&c.tree.itemData(e),n=r&&c.Nodes[r._type],a=n&&n.getTreeNodeHierarchy(e),i=t[a[this.parent]._id];if(a.hasOwnProperty("database")){var o=a.database.id;i&&"selected"in i&&o in i.selected&&i.selected[o]==r.id&&c.tree.select(e)}}})},165:function(e,t,r){"use strict";r(20),r(43),r(4),r(21);var n=r(56),a=r(77);function i(e){var t=e.split("(");t.splice(-1,1);var r=null,n="";for(r=0;r<t.length;r++)n=n.concat(t[r]),r!=t.length-1&&(n=n.concat("("));return n}e.exports={setFocusToDebuggerEditor:function(e,t){t&&9!==(t.which||t.keyCode)&&e.focus()},getFunctionId:function(e){var t;return e&&(e.function&&e.function._id?t=e.function._id:e.edbfunc&&e.edbfunc._id&&(t=e.edbfunc._id)),t},getProcedureId:function(e){var t;return e&&(e.procedure&&e.procedure._id?t=e.procedure._id:e.edbproc&&e.edbproc._id&&(t=e.edbproc._id)),t},setDebuggerTitle:function(e,t,r,o,s){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,d="";d=l||t.debugger_tab_title_placeholder;var c=r.split("(");r=i(r);var f=c[c.length-1].split(")"),p="";f.length>0&&(p=p.concat(f[0]));var g={function_name:r,args:p,schema:o,database:s,type:"debugger"},_=(0,n.generateTitle)(d,g);(0,a._set_dynamic_tab)(u,t.dynamic_tabs),e.title("<span>"+_+"</span>")}}},182:function(e,t,r){"use strict";var n,a;r(12),r(4),r(8),r(76),n=[r(0),r(1)],void 0===(a=function(e,t){return function(e,r){if(t.isUndefined(r)||t.isNull(r))return!0;r.startsWith("coll-")&&(r=r.replace("coll-",""));if(t.indexOf(["server_group","server","catalog_object_column"],r)>=0)return!0;var n=e.get_preference("browser","show_node_"+r);return!n||n.value}}.apply(t,n))||(e.exports=a)},183:function(e,t,r){"use strict";(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r(28),r(9),r(38),r(6),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0;var a=f(r(3)),i=f(r(5)),o=f(r(0)),s=c(r(11)),l=c(r(59)),u=f(r(26));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function f(e){return e&&e.__esModule?e:{default:e}}var p=r(94),g=a.default.Browser=a.default.Browser||{};t.pgBrowser=g,e.extend(g,{preferences_cache:[],prefcache_version:0,generate_preference_version:function(){return(new Date).getTime()},preference_version:function(e){if(!e)return this.prefcache_version;this.prefcache_version=e},get_preference:function(t,r){var n=this;if(0!=e.size(n.preferences_cache))return e.findWhere(n.preferences_cache,{module:t,name:r});var a=setInterval((function(){if(n.preferences_cache.length>0)return clearInterval(a),e.findWhere(n.preferences_cache,{module:t,name:r})}),1e3)},get_preferences_for_module:function(t){var r={};if(e.each(e.where(this.preferences_cache,{module:t}),(function(e){r[e.name]=e.value})),Object.keys(r).length>0)return r},get_preference_for_id:function(t){return e.findWhere(this.preferences_cache,{id:t})},cache_preferences:function(t){var r=this,n={};n[a.default.csrf_token_header]=a.default.csrf_token,setTimeout((function(){o.default.ajax({url:(0,i.default)("preferences.get_all"),headers:n}).done((function(n){r.preferences_cache=n,r.preference_version(r.generate_preference_version()),g.keyboardNavigation.init(),g.tree&&(p.modifyAcitreeAnimation(r),p.modifyAlertifyAnimation(r)),g.browserTreeState.init(),t&&("string"==typeof t?o.default.event.trigger("prefchange:"+t):e.each(t,(function(e,t){o.default.event.trigger("prefchange:"+t)})))})).fail((function(e,t,r){s.pgRespErrorNotify(e,r)}))}),500)},reflectPreferences:function(e){if("sqleditor"===e||null==e){var t=this.get_preferences_for_module("sqleditor");(0,o.default)(this.editor.getWrapperElement()).css("font-size",l.calcFontSize(t.sql_font_size)),this.editor.setOption("tabSize",t.tab_size),this.editor.setOption("lineWrapping",t.wrap_code),this.editor.setOption("autoCloseBrackets",t.insert_pair_brackets),this.editor.setOption("matchBrackets",t.brace_matching),this.editor.refresh()}},onPreferencesChange:function(e,t){(0,o.default)(u.default).on("prefchange:"+e,(function(e){t(e)}))}})}).call(this,r(1))},184:function(e,t){e.exports=n},185:function(e,t,r){"use strict";(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r(9),r(6),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0;var a=c(r(3)),i=c(r(5)),o=c(r(0)),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}r.default=e,t&&t.set(e,r);return r}(r(11)),l=c(r(2));r(60);var u=c(r(26));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}var f=a.default.Browser=a.default.Browser||{};t.pgBrowser=f;var p=window.wcDocker;e.extend(f,{lock_layout_levels:{PREVENT_DOCKING:"docking",FULL:"full",NONE:"none"},buildDefaultLayout:function(e){var t=e.addPanel("browser",p.DOCK.LEFT),r=e.addPanel("dashboard",p.DOCK.RIGHT,t);e.addPanel("properties",p.DOCK.STACKED,r,{tabOrientation:p.TAB.TOP}),e.addPanel("sql",p.DOCK.STACKED,r),e.addPanel("statistics",p.DOCK.STACKED,r),e.addPanel("dependencies",p.DOCK.STACKED,r),e.addPanel("dependents",p.DOCK.STACKED,r)},save_current_layout:function(e,t){if(t){var r={setting:e,value:t.save()};o.default.ajax({type:"POST",url:(0,i.default)("settings.store_bulk"),data:r})}},restore_layout:function(e,t,r){if(""!=t)try{e.restore(t)}catch(t){e.clear(),r&&r(e)}else r&&r(e);var n=u.default.pgAdmin.Browser,a=setInterval((function(){n.get_preferences_for_module("browser")&&(clearInterval(a),n.reflectLocklayoutChange(e),n.onPreferencesChange("browser",(function(){n.reflectLocklayoutChange(e)})))}),500)},reflectLocklayoutChange:function(e){var t=u.default.pgAdmin.Browser,r=t.get_preferences_for_module("browser");t.lock_layout(e,r.lock_layout)},lock_layout:function(t,r){var n=this.menus.file.mnu_locklayout.menu_items;switch(r){case this.lock_layout_levels.PREVENT_DOCKING:t.lockLayout(p.LOCK_LAYOUT_LEVEL.PREVENT_DOCKING);break;case this.lock_layout_levels.FULL:t.lockLayout(p.LOCK_LAYOUT_LEVEL.FULL);break;case this.lock_layout_levels.NONE:t.lockLayout(p.LOCK_LAYOUT_LEVEL.NONE)}e.each(n,(function(e){e.name!="mnu_lock_"+r?e.change_checked(!1):e.change_checked(!0)}))},save_lock_layout:function(e){var t=u.default.pgAdmin.Browser;o.default.ajax({url:(0,i.default)("browser.lock_layout"),method:"PUT",contentType:"application/json",data:JSON.stringify({value:e})}).done((function(){t.cache_preferences("browser")})).fail((function(e,t){s.pgNotifier(t,e,(0,l.default)("Failed to save the lock layout setting."))}))},mnu_lock_docking:function(){this.lock_layout(this.docker,this.lock_layout_levels.PREVENT_DOCKING),this.save_lock_layout(this.lock_layout_levels.PREVENT_DOCKING)},mnu_lock_full:function(){this.lock_layout(this.docker,this.lock_layout_levels.FULL),this.save_lock_layout(this.lock_layout_levels.FULL)},mnu_lock_none:function(){this.lock_layout(this.docker,this.lock_layout_levels.NONE),this.save_lock_layout(this.lock_layout_levels.NONE)}})}).call(this,r(1))},187:function(e,t,r){"use strict";r(34),r(6),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0;var n=l(r(0)),a=l(r(1)),i=l(r(3)),o=l(r(26)),s=r(16);function l(e){return e&&e.__esModule?e:{default:e}}var u=i.default.Browser=i.default.Browser||{};t.pgBrowser=u;a.default.extend(u,{inactivity_timeout_at:null,logging_activity:!1,inactivity_timeout_daemon_running:!1,is_pgadmin_timedout:function(){return!o.default.pgAdmin},is_inactivity_timeout:function(){return o.default.pgAdmin.Browser.inactivity_timeout_at<this.get_epoch_now()},get_epoch_now:function(){return(0,s.getEpoch)()},log_activity:function(){var e=this;this.logging_activity||(this.logging_activity=!0,this.inactivity_timeout_at=this.get_epoch_now()+i.default.user_inactivity_timeout,setTimeout((function(){e.logging_activity=!1}),1e3))},register_to_activity_listener:function(e,t){var r=["mousemove","mousedown","keydown"],n=this;r.forEach((function(a){e.addEventListener(a,(function a(){n.is_pgadmin_timedout()?(r.forEach((function(t){e.removeEventListener(t,a,!0)})),t()):o.default.pgAdmin.Browser.log_activity()}),!0)}))},override_activity_event_decorator:function(e){return function(){return i.default.override_user_inactivity_timeout&&o.default.pgAdmin.Browser.log_activity(),e.apply(this,arguments)}},logout_inactivity_user:function(){a.default.isUndefined(u.utils)||a.default.isUndefined(u.utils.logout_url)||(window.location.href=u.utils.logout_url)},start_inactivity_timeout_daemon:function(){var e=this;if(i.default.user_inactivity_timeout>0&&!e.inactivity_timeout_daemon_running)var t=setInterval((function(){e.inactivity_timeout_daemon_running=!0,e.is_inactivity_timeout()&&(clearInterval(t),e.inactivity_timeout_daemon_running=!1,(0,n.default)(window).off("beforeunload"),e.logout_inactivity_user())}),1e3)}})},188:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r(7),r(14),r(6);var a=g(r(1)),i=g(r(3)),o=g(r(0)),s=g(r(112)),l=p(r(16)),u=g(r(121)),d=p(r(68)),c=g(r(26));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function g(e){return e&&e.__esModule?e:{default:e}}var _=i.default.Browser=i.default.Browser||{};_.keyboardNavigation=_.keyboardNavigation||{},a.default.extend(_.keyboardNavigation,{init:function(){s.default.reset(),_.preferences_cache.length>0&&(this.keyboardShortcut={file_shortcut:l.parseShortcutValue(_.get_preference("browser","main_menu_file").value),object_shortcut:l.parseShortcutValue(_.get_preference("browser","main_menu_object").value),tools_shortcut:l.parseShortcutValue(_.get_preference("browser","main_menu_tools").value),help_shortcut:l.parseShortcutValue(_.get_preference("browser","main_menu_help").value),left_tree_shortcut:l.parseShortcutValue(_.get_preference("browser","browser_tree").value),tabbed_panel_backward:l.parseShortcutValue(_.get_preference("browser","tabbed_panel_backward").value),tabbed_panel_forward:l.parseShortcutValue(_.get_preference("browser","tabbed_panel_forward").value),sub_menu_query_tool:l.parseShortcutValue(_.get_preference("browser","sub_menu_query_tool").value),sub_menu_view_data:l.parseShortcutValue(_.get_preference("browser","sub_menu_view_data").value),sub_menu_search_objects:l.parseShortcutValue(_.get_preference("browser","sub_menu_search_objects").value),sub_menu_properties:l.parseShortcutValue(_.get_preference("browser","sub_menu_properties").value),sub_menu_create:l.parseShortcutValue(_.get_preference("browser","sub_menu_create").value),sub_menu_delete:l.parseShortcutValue(_.get_preference("browser","sub_menu_delete").value),sub_menu_refresh:l.parseShortcutValue(_.get_preference("browser","sub_menu_refresh").value),context_menu:l.parseShortcutValue(_.get_preference("browser","context_menu").value),direct_debugging:l.parseShortcutValue(_.get_preference("browser","direct_debugging").value),drop_multiple_objects:l.parseShortcutValue(_.get_preference("browser","grid_menu_drop_multiple").value),drop_cascade_multiple_objects:l.parseShortcutValue(_.get_preference("browser","grid_menu_drop_cascade_multiple").value),add_grid_row:l.parseShortcutValue(_.get_preference("browser","add_grid_row").value)},this.shortcutMethods={bindMainMenu:{shortcuts:[this.keyboardShortcut.file_shortcut,this.keyboardShortcut.object_shortcut,this.keyboardShortcut.tools_shortcut,this.keyboardShortcut.help_shortcut]},bindRightPanel:{shortcuts:[this.keyboardShortcut.tabbed_panel_backward,this.keyboardShortcut.tabbed_panel_forward]},bindLeftTree:{shortcuts:this.keyboardShortcut.left_tree_shortcut},bindSubMenuQueryTool:{shortcuts:this.keyboardShortcut.sub_menu_query_tool},bindSubMenuViewData:{shortcuts:this.keyboardShortcut.sub_menu_view_data},bindSubMenuSearchObjects:{shortcuts:this.keyboardShortcut.sub_menu_search_objects},bindSubMenuProperties:{shortcuts:this.keyboardShortcut.sub_menu_properties},bindSubMenuCreate:{shortcuts:this.keyboardShortcut.sub_menu_create},bindSubMenuDelete:{shortcuts:this.keyboardShortcut.sub_menu_delete},bindSubMenuRefresh:{shortcuts:this.keyboardShortcut.sub_menu_refresh,bindElem:"#tree"},bindContextMenu:{shortcuts:this.keyboardShortcut.context_menu},bindDirectDebugging:{shortcuts:this.keyboardShortcut.direct_debugging},bindDropMultipleObjects:{shortcuts:this.keyboardShortcut.drop_multiple_objects},bindDropCascadeMultipleObjects:{shortcuts:this.keyboardShortcut.drop_cascade_multiple_objects},bindAddGridRow:{shortcuts:this.keyboardShortcut.add_grid_row}},this.bindShortcuts())},bindShortcuts:function(){var e=this;a.default.each(e.shortcutMethods,(function(t,r){e._bindWithMousetrap(t.shortcuts,e[r],t.bindElem)}));(0,o.default)(".pg-navbar").on("keydown",(function(t){switch(t.keyCode){case 37:e.bindMainMenuLeft(t);break;case 38:e.bindMainMenuUpDown(t,"up");break;case 39:e.bindMainMenuRight(t);break;case 40:e.bindMainMenuUpDown(t,"down")}}))},_bindWithMousetrap:function(e,t,r){var n=this;if(s.default.unbind(e),r){var a=document.querySelector(r);(0,s.default)(a).bind(e,function(){t.apply(this,arguments)}.bind(a))}else s.default.bind(e,(function(){t.apply(n,arguments)}))},unbindShortcuts:function(){a.default.each(this.mousetrapInstances,(function(e){e.instance.reset()})),this.mousetrapInstances=[]},bindMainMenu:function(e,t){var r=this.keyboardShortcut;t===r.file_shortcut&&(0,o.default)("#mnu_file a.dropdown-toggle").dropdown("toggle"),t===r.object_shortcut&&(0,o.default)("#mnu_obj a.dropdown-toggle").first().dropdown("toggle"),t===r.tools_shortcut&&(0,o.default)("#mnu_tools a.dropdown-toggle").dropdown("toggle"),t===r.help_shortcut&&(0,o.default)("#mnu_help a.dropdown-toggle").dropdown("toggle")},bindRightPanel:function(e,t){var r=0,n=i.default.Browser.docker.findPanels().length-1,o=0,s=!1,l=this.keyboardShortcut;a.default.each(i.default.Browser.docker.findPanels(),(function(e,t){e.isVisible()&&!s&&"browser"!==e._type&&(o=t,s=!0)})),t===l.tabbed_panel_backward?r=o>0?o-1:1:t===l.tabbed_panel_forward&&(r=o<n?o+1:n),i.default.Browser.docker.findPanels()[r].focus(),setTimeout((function(){document.activeElement instanceof HTMLIFrameElement&&document.activeElement.blur()}),1e3)},bindMainMenuLeft:function(e){if((0,o.default)(e.target).hasClass("nav-link")){var t=(0,o.default)(e.target).closest(".nav-item");for(d._stopEventPropagation(e),t=t.prev(".nav-item");t.hasClass("d-none");)t=t.prev(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,o.default)(e.target).closest(".dropdown-menu").length>0){var r=(0,o.default)(e.target).closest("li");d._stopEventPropagation(e);var n=r.closest(".dropdown-menu");n.closest(".dropdown-submenu").length>0&&(n.removeClass("show"),n.closest(".dropdown-submenu").removeClass("dropdown-submenu-visible"),(r=n.closest(".dropdown-submenu")).find(".dropdown-item").trigger("focus"))}},bindMainMenuRight:function(e){if((0,o.default)(e.target).hasClass("nav-link")){var t=(0,o.default)(e.target).closest(".nav-item");for(d._stopEventPropagation(e),t=t.next(".nav-item");t.hasClass("d-none");)t=t.next(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,o.default)(e.target).closest(".dropdown-menu").length>0){var r=(0,o.default)(e.target).closest("li");d._stopEventPropagation(e),r.hasClass("dropdown-submenu")&&(r.addClass("dropdown-submenu-visible"),r.find(".dropdown-menu").addClass("show"),r.find(".dropdown-menu .dropdown-item").first().trigger("focus"))}},bindMainMenuUpDown:function(e,t){if((0,o.default)(e.target).closest(".dropdown-menu").length>0){d._stopEventPropagation(e);var r=(0,o.default)(e.target).closest("li"),n=(0,o.default)(e.target).closest(".dropdown-menu");for(n.find(".show").removeClass("show"),n.find(".dropdown-submenu").removeClass("dropdown-submenu-visible"),"up"===t?r=r.prev():"down"===t&&(r=r.next());r.hasClass("dropdown-divider")||r.find(".dropdown-item").first().hasClass("disabled");)"up"===t?r=r.prev():"down"===t&&(r=r.next());r.find(".dropdown-item").trigger("focus")}},bindLeftTree:function(){var e=this.getTreeDetails();(0,o.default)("#tree").trigger("focus"),e.t.focus(e.i),e.t.select(e.i)},bindSubMenuQueryTool:function(){var e=this.getTreeDetails();e.d&&i.default.DataGrid.show_query_tool("",e.i)},bindSubMenuViewData:function(){var e=this.getTreeDetails();e.d&&i.default.DataGrid.show_data_grid({mnuid:1},e.i)},bindSubMenuSearchObjects:function(){var e=this.getTreeDetails();e.d&&i.default.SearchObjects.show_search_objects("",e.i)},bindSubMenuProperties:function(){var e=this.getTreeDetails();e.d&&!0!==i.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&i.default.Browser.Node.callbacks.show_obj_properties.call(i.default.Browser.Nodes[e.t.itemData(e.i)._type],{action:"edit"})},bindSubMenuCreate:function(){var e=this.getTreeDetails(),t=i.default.Browser.Nodes[e.t.itemData(e.i)._type];if(e.d){if(!0===t.collection_node){if(!t.node)return;t=i.default.Browser.Nodes[t.node]}i.default.Browser.Node.callbacks.show_obj_properties.call(t,{action:"create",item:e.i})}},bindSubMenuDelete:function(){var e=this.getTreeDetails();e.d&&!0!==i.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&i.default.Browser.Node.callbacks.delete_obj.call(i.default.Browser.Nodes[e.t.itemData(e.i)._type])},bindSubMenuRefresh:function(e){e.preventDefault();var t=_.keyboardNavigation.getTreeDetails();i.default.Browser.Node.callbacks.refresh.call(i.default.Browser.Nodes[t.t.itemData(t.i)._type])},bindContextMenu:function(e){var t=this.getTreeDetails(),r=e.srcElement||e.target,n=(0,o.default)(r).find(".aciTreeEntry").position().left+70,a=(0,o.default)(r).find(".aciTreeEntry").position().top+70;t.t.blur(t.i),(0,o.default)("#tree").trigger("blur"),t.i.children().contextMenu({x:n,y:a})},bindDirectDebugging:function(){var e=this.getTreeDetails(),t=e.t.itemData(e.i)._type;!e.d||"function"!==t&&"procedure"!==t||i.default.Tools.Debugger.can_debug(e.d,e.i,{debug_type:"direct"})&&i.default.Tools.Debugger.get_function_information(i.default.Browser.Nodes[t])},bindDropMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&(0,o.default)("button.delete_multiple").length>0&&(0,o.default)("button.delete_multiple").click()},bindDropCascadeMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&(0,o.default)("button.delete_multiple_cascade").length>0&&(0,o.default)("button.delete_multiple_cascade").click()},bindAddGridRow:function(){var e=(0,o.default)(document.activeElement).closest(".object.subnode");(0,o.default)(e).length&&(0,o.default)(e).find(".add").click()},isPropertyPanelVisible:function(){var e=!1;return a.default.each(i.default.Browser.docker.findPanels(),(function(t){"properties"===t._type&&(e=t.isVisible())})),e},getTreeDetails:function(){var e=i.default.Browser.tree,t=e.selected().length>0?e.selected():e.first(),r=t&&1===t.length?e.itemData(t):void 0;return{t:e,i:t,d:r}},getDialogTabNavigator:function(e){var t=c.default.pgAdmin.Browser.get_preference("browser","dialog_tab_backward").value,r=c.default.pgAdmin.Browser.get_preference("browser","dialog_tab_forward").value;return new u.default.dialogTabNavigator(e,t,r)}}),e.exports=i.default.Browser.keyboardNavigation},2:function(e,t,r){"use strict";var n,a;r(18),r(23),r(4),r(21),n=[r(100)],void 0===(a=function(e){return function(t){var r=e[t]?e[t]:t;if(1==arguments.length)return r;try{var n=arguments;return r.split("%s").map((function(e,t){return t>0?t<n.length?[n[t],e].join(""):["%s",e].join(""):e})).join("")}catch(e){return console.error(e),r}}}.apply(t,n))||(e.exports=a)},242:function(e,t,r){"use strict";var n,a;r(7),r(51),r(12),r(67),r(29),r(4),r(52),r(8),r(21),r(65),r(6),n=[r(2),r(5),r(0),r(1),r(17),r(11),r(3),r(10),r(27),r(26),r(165),r(60)],void 0===(a=function(e,t,r,n,a,i,o,s,l,u,d){var c=window.wcDocker,f=function(e){var t=e.get("type");if(-1!=t.indexOf("[]"))switch(t.replace("[]","")){case"boolean":return l.Extension.InputBooleanArrayCell;case"integer":case"smallint":case"bigint":case"serial":case"smallserial":case"bigserial":case"oid":case"cid":case"xid":case"tid":return l.Extension.InputIntegerArrayCell;case"real":case"numeric":case"double precision":case"decimal":return l.Extension.InputNumberArrayCell;default:return l.Extension.InputStringArrayCell}else switch(t){case"boolean":return l.BooleanCell.extend({formatter:l.BooleanCellFormatter});case"integer":case"smallint":case"bigint":case"serial":case"smallserial":case"bigserial":case"oid":case"cid":case"xid":case"tid":return null!=e.get("value")&&e.set({value:isNaN(parseInt(e.get("value")))?null:parseInt(e.get("value"))},{silent:!0}),l.IntegerCell;case"real":case"numeric":case"double precision":case"decimal":return null!=e.get("value")&&e.set({value:parseFloat(e.get("value"))},{silent:!0}),l.NumberCell;case"string":return l.StringCell;case"date":return l.DateCell;default:return l.Cell}},p=function(e){return-1!=e.get("type").indexOf("[]")?l.StringCell:l.BooleanCell},g=a.Model.extend({defaults:{name:void 0,type:void 0,is_null:void 0,expr:void 0,value:void 0,use_default:void 0,default_value:void 0},validate:function(){if(n.isUndefined(this.get("value"))||n.isNull(this.get("value"))||""==String(this.get("value")).replace(/^\s+|\s+$/g,"")){var t=e("Please enter a value for the parameter.");return this.errorModel.set("value",t),t}return this.errorModel.unset("value"),null}}),_=a.Collection.extend({model:g}),b=function(e){return e instanceof a.Model&&e.get("use_default")},h=function(e){if(e instanceof a.Model)return-1==e.get("type").indexOf("[]")};return function(a,o,g,v){i.debuggerInputArgsDialog||i.dialog("debuggerInputArgsDialog",(function(){return{main:function(a,o,d,c,g){this.preferences=u.default.pgAdmin.Browser.get_preferences_for_module("debugger"),this.set("title",a),this.set("debug_info",o),this.set("restart_debug",d),this.set("trans_id",g),this.set("is_edb_proc",c);var v,m,y,w,k,D,x=this.func_args_data=[];if(0==d){var T=s.tree,S=T.selected(),E=S&&1==S.length?T.itemData(S):void 0,C=E&&s.Nodes[E._type];if(!E)return;var N,P=C.getTreeNodeHierarchy.apply(C,[S]);"function"==E._type?N=t("debugger.get_arguments",{sid:P.server._id,did:P.database._id,scid:P.schema._id,func_id:P.function._id}):"procedure"==E._type?N=t("debugger.get_arguments",{sid:P.server._id,did:P.database._id,scid:P.schema._id,func_id:P.procedure._id}):"edbfunc"==E._type?N=t("debugger.get_arguments",{sid:P.server._id,did:P.database._id,scid:P.schema._id,func_id:P.edbfunc._id}):"edbproc"==E._type&&(N=t("debugger.get_arguments",{sid:P.server._id,did:P.database._id,scid:P.schema._id,func_id:P.edbproc._id}))}else N=t("debugger.get_arguments",{sid:o.server_id,did:o.database_id,scid:o.schema_id,func_id:o.function_id});r.ajax({url:N,method:"GET",async:!1}).done((function(e){if(0!=e.data.args_count)for(S=0;S<e.data.result.length;S++)x.push({arg_id:e.data.result[S].arg_id,is_null:e.data.result[S].is_null,is_expression:e.data.result[S].is_expression,use_default:e.data.result[S].use_default,value:e.data.result[S].value})})).fail((function(){i.alert(e("Debugger Error"),e("Unable to fetch the arguments from server"))}));var O,A,M,j,L,B,I=l.HeaderCell.extend({className:"width_percent_25"}),K=[],V=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"is_null",label:e("Null?"),type:"boolean",cell:"boolean",align_center:!0},{name:"expr",label:e("Expression?"),type:"boolean",cellFunction:p,editable:h,align_center:!0},{name:"value",label:e("Value"),type:"text",editable:!0,cellFunction:f,headerCell:I,align_center:!0},{name:"use_default",label:e("Use Default?"),type:"boolean",cell:"boolean",editable:b},{name:"default_value",label:e("Default"),type:"text",editable:!1,cell:"string"}],q=[],R=[],F=this.input_arg_id=[];if(null!=o.proargmodes){var U=o.proargmodes.split(",");for(O=0;O<U.length;O++)("i"==U[O]||"b"==U[O]||c&&"o"==U[O])&&F.push(O)}else{var G=o.proargtypenames.split(",");for(O=0;O<G.length;O++)F.push(O)}if(m=o.proargtypenames.split(","),null!=o.proargmodes&&(y=o.proargmodes.split(",")),o.pronargdefaults&&(w=o.pronargdefaults,k=o.proargdefaults.split(","),D=w),null!=o.proargnames){for(B=(v=o.proargnames.split(",")).length-1;B>=0;B--)null!=o.proargmodes?y&&("i"==y[B]||"b"==y[B]||c&&"o"==y[B])&&(D?(D-=1,K[B]=k[D]):K[B]="<no default>"):D?(D-=1,K[B]=k[D]):K[B]="<no default>";if(0!=m.length)for(S=0;S<m.length;S++)null!=o.proargmodes?y&&("i"==y[S]||"b"==y[S]||c&&"o"==y[S])&&(L=!1,"<no default>"!=K[S]&&(L=!0),q.push({name:v[S],type:m[S],use_default:L,default_value:K[S]})):(L=!1,"<no default>"!=K[S]&&(L=!0),q.push({name:v[S],type:m[S],use_default:L,default_value:K[S]}));if(0!=x.length)for(S=0;S<x.length;S++)j=x[S].arg_id,null!=o.proargmodes&&y&&"o"==y[j]&&!c||(M=[],-1!=m[j].indexOf("[]")?(A=x[S].value.split(","),n.each(A,(function(e){M.push({value:e})}))):M=x[S].value,R.push({name:v[j],type:m[j],is_null:!!x[S].is_null,expr:!!x[S].is_expression,value:M,use_default:!!x[S].use_default,default_value:K[j]}))}else{var $=[];for(S=0;S<m.length;S++)$[S]="dbgparam"+(S+1);if(o.pronargdefaults){for(B=$.length-1;B>=0;B--)D?(D-=1,K[B]=k[D]):K[B]="<No default value>";for(S=0;S<m.length;S++)(null==o.proargmodes||y&&("i"==y[S]||"b"==y[S]||c&&"o"==y[S]))&&(L=!1,"<No default value>"!=K[S]&&(L=!0),q.push({name:$[S],type:m[S],use_default:L,default_value:K[S]}))}else for(S=0;S<m.length;S++)q.push({name:$[S],type:m[S],use_default:!1,default_value:"<No default value>"}),K[S]="<No default value>";if(0!=x.length)for(S=0;S<x.length;S++)j=x[S].arg_id,M=[],-1!=m[j].indexOf("[]")?(A=x[S].value.split(","),n.each(A,(function(e){M.push({value:e})}))):M=x[S].value,R.push({name:$[j],type:m[j],is_null:!!x[S].is_null,expr:!!x[S].is_expression,value:M,use_default:!!x[S].use_default,default_value:K[j]})}0==x.length?this.debuggerInputArgsColl=new _(q):this.debuggerInputArgsColl=new _(R),this.grid&&(this.grid.remove(),this.grid=null);var z=this.grid=new l.Grid({columns:V,collection:this.debuggerInputArgsColl,className:"backgrid table table-bordered table-noouter-border table-bottom-border"});z.render();var H=document.createElement("div");H.classList.add("debugger-args"),H.appendChild(z.el),r(this.elements.content).html(H);var W=r(z.el).find("input:checkbox").first();W.length&&setTimeout((function(){W.trigger("focus")}),250)},settings:{debug_info:void 0,restart_debug:void 0,trans_id:void 0},setup:function(){return{buttons:[{text:e("Clear All"),className:"btn btn-secondary pull-left fa fa-eraser pg-alertify-button"},{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:e("Debug"),key:13,className:"btn btn-primary fa fa-bug pg-alertify-button"}],options:{padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}},callback:function(n){if(n.button.text===e("Debug")){var a=this;if(0==a.setting("restart_debug")){var o=s.tree,l=o.selected(),f=l&&1==l.length?o.itemData(l):void 0,p=f&&s.Nodes[f._type];if(!f)return;var g=p.getTreeNodeHierarchy.apply(p,[l])}var _,b=[],h=this.sqlite_func_args_list=[],v=0;if(this.grid.collection.each((function(e){var t;(e.get("is_null")?b.push({name:e.get("name"),type:e.get("type"),value:"NULL"}):e.get("use_default")?b.push({name:e.get("name"),type:e.get("type"),value:e.get("default_value")}):b.push({name:e.get("name"),type:e.get("type"),value:e.get("value")}),0==a.setting("restart_debug"))?("function"==f._type?t=g.function._id:"procedure"==f._type?t=g.procedure._id:"edbfunc"==f._type?t=g.edbfunc._id:"edbproc"==f._type&&(t=g.edbproc._id),h.push({server_id:g.server._id,database_id:g.database._id,schema_id:g.schema._id,function_id:t,arg_id:a.input_arg_id[v],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")})):h.push({server_id:a.setting("debug_info").server_id,database_id:a.setting("debug_info").database_id,schema_id:a.setting("debug_info").schema_id,function_id:a.setting("debug_info").function_id,arg_id:a.input_arg_id[v],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")});v+=1})),0==a.setting("restart_debug"))f&&"function"==f._type?_=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:a.setting("trans_id"),sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.function._id}):f&&"procedure"==f._type?_=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:a.setting("trans_id"),sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.procedure._id}):f&&"edbfunc"==f._type?_=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:a.setting("trans_id"),sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbfunc._id}):f&&"edbproc"==f._type&&(_=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:a.setting("trans_id"),sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbproc._id})),r.ajax({url:_,method:"POST",data:{data:JSON.stringify(b)}}).done((function(n){var o,l=t("debugger.direct",{trans_id:n.data.debuggerTransId}),p=u.default.pgAdmin.Browser.get_preferences_for_module("browser").new_browser_tab_open;if(p&&p.includes("debugger"))window.open(l,"_blank");else{s.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",(function(e){e.openURL(l)}));var _=s.docker.findPanels("properties"),b=s.docker.addPanel("frm_debugger",c.DOCK.STACKED,_[0]),v=s.get_preferences_for_module("browser"),m=g.function?g.function.label:g.trigger_function?g.trigger_function.label:g.trigger?g.trigger.label:g.procedure.label;d.setDebuggerTitle(b,v,m,g.schema.label,g.database.label,null,s),b.focus(),b.on(c.EVENT.CLOSED,(function(){var e=t("debugger.close",{trans_id:n.data.debuggerTransId});r.ajax({url:e,method:"DELETE"})})),b.on(c.EVENT.RENAME,(function(t){i.prompt("",t.$titleText[0].textContent,(function(e,t){if(t){t=t.trim();var r=g.function?g.function.label:g.trigger_function?g.trigger_function.label:g.trigger?g.trigger.label:g.procedure.label;d.setDebuggerTitle(b,a.preferences,r,g.schema.label,g.database.label,t,s)}}),(function(e){e.cancel=!1})).set({title:e("Rename Panel")})}))}"function"==f._type?o=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.function._id}):"procedure"==f._type?o=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.procedure._id}):"edbfunc"==f._type?o=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbfunc._id}):"edbproc"==f._type&&(o=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbproc._id})),r.ajax({url:o,method:"POST",data:{data:JSON.stringify(h)}}).done((function(){})).fail((function(){i.alert(e("Debugger Error"),e("Unable to set the arguments on the server"))}))})).fail((function(t){i.alert(e("Debugger Target Initialization Error"),t.responseJSON.errormsg)}));else{_=t("debugger.start_listener",{trans_id:a.setting("debug_info").trans_id}),r.ajax({url:_,method:"POST",data:{data:JSON.stringify(b)}}).done((function(){})).fail((function(t){i.alert(e("Debugger Listener Startup Error"),t.responseJSON.errormsg)}));var m=t("debugger.set_arguments",{sid:a.setting("debug_info").server_id,did:a.setting("debug_info").database_id,scid:a.setting("debug_info").schema_id,func_id:a.setting("debug_info").function_id});r.ajax({url:m,method:"POST",data:{data:JSON.stringify(h)}}).done((function(){})).fail((function(){i.alert(e("Debugger Error"),e("Unable to set the arguments on the server"))}))}return!0}if(n.button.text===e("Cancel"))return r.ajax({method:"DELETE",url:t("debugger.close",{trans_id:this.setting("trans_id")})}),!1;if(n.button.text===e("Clear All")){var y=this,w=null;if(0==y.setting("restart_debug")){var k=s.tree.selected(),D=s.tree.itemData(k);if(!D)return;var x=s.Nodes[D._type],T=x.getTreeNodeHierarchy.call(x,k);w=t("debugger.clear_arguments",{sid:T.server._id,did:T.database._id,scid:T.schema._id,func_id:D._id})}else w=t("debugger.clear_arguments",{sid:y.setting("debug_info").server_id,did:y.setting("debug_info").database_id,scid:y.setting("debug_info").schema_id,func_id:y.setting("debug_info").function_id});return r.ajax({url:w,method:"POST",data:{data:JSON.stringify(b)}}).done((function(){y.__internal.buttons[2].element.disabled=!0,y.main(y.setting("title"),y.setting("debug_info"),y.setting("restart_debug"),y.setting("is_edb_proc"),y.setting("trans_id")),y.prepare()})).fail((function(t){i.alert(e("Clear failed"),t.responseJSON.errormsg)})),n.cancel=!0,!0}},build:function(){i.pgDialogBuild.apply(this)},prepare:function(){var e;r(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),0==this.func_args_data.length?this.__internal.buttons[2].element.disabled=!0:this.__internal.buttons[2].element.disabled=!1,this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:edited",(e=this,function(){for(var t=!1,r=0;r<this.collection.length;r++)if(this.collection.models[r].get("is_null"))e.__internal.buttons[2].element.disabled=!1,t=!0;else if(null==this.collection.models[r].get("value")||null==this.collection.models[r].get("value")){if(t=!0,!this.collection.models[r].get("use_default")){e.__internal.buttons[2].element.disabled=!0;break}e.__internal.buttons[2].element.disabled=!1}t||(e.__internal.buttons[2].element.disabled=!1)})),this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:error",function(e){return function(){e.__internal.buttons[2].element.disabled=!0}}(this))}}})),i.debuggerInputArgsDialog(e("Debugger"),a,o,g,v).resizeTo(s.stdW.md,s.stdH.md)}}.apply(t,n))||(e.exports=a)},26:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){var e=null;try{e=window.opener&&window.opener.pgAdmin?function e(t){return t.opener&&t.opener.pgAdmin?e(t.opener):t}(window.opener):window.parent&&window.parent.pgAdmin?window.parent:window.top&&window.top.pgAdmin?window.top:window}catch(t){e=window}return e}();t.default=n},3:function(e,t,r){"use strict";(function(n){var a;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r(79),r(81),r(86),r(35),r(46),r(28),r(22),r(67),r(29),r(4),r(33),r(53),r(64),r(8),r(21),r(37),void 0===(a=function(){var e=window.pgAdmin=window.pgAdmin||{};function t(e,t,r){return void 0===r||0==+r?Math[e](t):(t=+t,r=+r,isNaN(t)||r%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-r:-r)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+r:r))))}return function(e,t,r){function n(t,r,n,i){n=n||"width";var o,l,u,f=(r.match(d)||[])[2],p="px"===f?1:c[f+"toPx"];if(p||/r?em/i.test(f)&&!i)t=p?t:"rem"===f?s:"fontSize"===n&&+e.parentNode||t,p=p||parseFloat(a(t,"fontSize")),u=parseFloat(r)*p;else{l=(o=t.style)[n];try{o[n]=r}catch(e){return 0}u=o[n]?parseFloat(a(t,n)):0,o[n]=void 0!==l?l:null}return u}function a(e,t){var r,o,s,l,c,f=["paddingTop","paddingBottom","borderTop","borderBottom"],p=4;if(o=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)],"%"===(s=((r=u?u(e)[t]:o?o+"px":"fontSize"===t?n(e,"1em","left",1)+"px":e.currentStyle[t]).match(d)||[])[2])&&i)if(/^top|bottom/.test(t)){for(l=(c=e.parentNode||e).offsetHeight;p--;)l-=parseFloat(a(c,f[p]));r=parseFloat(r)/100*l+"px"}else r=n(e,r);else("auto"===r||s&&"px"!==s)&&u?r=0:s&&"px"!==s&&!u&&(r=n(e,r)+"px");return r}var i,o=t.createElement("test"),s=t.documentElement,l=t.defaultView,u=l&&l.getComputedStyle,d=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,c={},f=[1/25.4,1/2.54,1/72,1/6],p=["mm","cm","pt","pc","in","mozmm"],g=6;for(s.appendChild(o),u&&(o.style.marginTop="1%",i="1%"===u(o).marginTop);g--;)c[p[g]+"toPx"]=f[g]?f[g]*c.inToPx:n(o,"1"+p[g]);s.removeChild(o),e.toPx=n}(e,window.document),e.natural_sort=function(e,t,r){r=r||{};var n,a,o=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,d=/^0/,c=function(e){return r.insensitive&&(""+e).toLowerCase()||""+e},f=c(e).replace(s,"")||"",p=c(t).replace(s,"")||"",g=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),_=p.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),b=parseInt(f.match(u))||1!==g.length&&f.match(l)&&Date.parse(f),h=parseInt(p.match(u))||b&&p.match(l)&&Date.parse(p)||null,v=r.desc?-1:1;if(h){if(b<h)return-1*v;if(b>h)return 1*v}for(var m=0,y=Math.max(g.length,_.length);m<y;m++){if(n=!(g[m]||"").match(d)&&parseFloat(g[m])||g[m]||0,a=!(_[m]||"").match(d)&&parseFloat(_[m])||_[m]||0,isNaN(n)!==isNaN(a))return(isNaN(n)?1:-1)*v;if(i(n)!==i(a)&&(n+="",a+=""),n<a)return-1*v;if(n>a)return 1*v}return 0},e.numeric_comparator=function(e,t){return(e=parseInt(e))<(t=parseInt(t))?-1:e==t?0:1},Math.round10||(Math.round10=function(e,r){return t("round",e,r)}),Math.floor10||(Math.floor10=function(e,r){return t("floor",e,r)}),Math.ceil10||(Math.ceil10=function(e,r){return t("ceil",e,r)}),e}.apply(t,[]))||(e.exports=a)}).call(this,r(3))},316:function(e,t,r){"use strict";var n,a;r(7),r(51),r(18),r(14),r(9),r(4),r(52),r(8),r(6),n=[r(2),r(5),r(0),r(1),r(11),r(3),r(10),r(17),r(27),r(15),r(89),r(242),r(68),r(165),r(26),r(60)],void 0===(a=function(e,t,r,n,a,i,o,s,l,u,d,c,f,p,g){var _=d.default,b=window.wcDocker;null!=i.Browser.tree&&(i=i||window.pgAdmin||{});var h=i.Tools=i.Tools||{};if(h.DirectDebug)return h.DirectDebug;var v=new function(){};n.extend(v,s.Events,{enable:function(e,t){this.trigger("pgDebugger:button:state:"+e,t)},enable_toolbar_buttons:function(){this.enable("stop",!0),this.enable("step_over",!0),this.enable("step_into",!0),this.enable("toggle_breakpoint",!0),this.enable("clear_all_breakpoints",!0),this.enable("continue",!0)},disable_toolbar_buttons:function(){this.enable("stop",!1),this.enable("step_over",!1),this.enable("step_into",!1),this.enable("toggle_breakpoint",!1),this.enable("clear_all_breakpoints",!1),this.enable("continue",!1)},set_breakpoint:function(n,i,o){var s=t("debugger.set_breakpoint",{trans_id:n,line_no:i,set_type:o});r.ajax({url:s,method:"GET"}).done((function(e){e.data.status})).fail((function(){a.alert(e("Debugger Error"),e("Error while setting debugging breakpoint."))}))},UpdateBreakpoint:function(e){var t=this.GetBreakpointInformation(e);if(1!=t.length||-1!=t[0].linenumber){for(var r,n=new Array,a=0;a<t.length;a++)-1!=t[a].linenumber&&n.push(t[a].linenumber);for(a=0;a<n.length;a++){null!=h.DirectDebug.editor.lineInfo(n[a]-1).gutterMarkers?h.DirectDebug.editor.setGutterMarker(n[a]-1,"breakpoints",null):h.DirectDebug.editor.setGutterMarker(n[a]-1,"breakpoints",(r=void 0,(r=document.createElement("div")).style.color="#822",r.innerHTML="●",r))}}},GetBreakpointInformation:function(n){var i="",o=t("debugger.execute_query",{trans_id:n,query_type:"get_breakpoints"});return r.ajax({url:o,method:"GET",async:!1}).done((function(t){"Success"===t.data.status?i=t.data.result:"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while fetching breakpoint information."))})).fail((function(){a.alert(e("Debugger Error"),e("Error while fetching breakpoint information."))})),i},setActiveLine:function(e){var t=h.DirectDebug.editor;e&&this.active_line_no&&t.removeLineClass(this.active_line_no,"wrap","CodeMirror-activeline-background"),!e&&this.active_line_no&&(e=this.active_line_no),e>0&&(this.active_line_no=e,t.addLineClass(this.active_line_no,"wrap","CodeMirror-activeline-background"),t.centerOnLine(this.active_line_no))},start_execution:function(n,i){var o=this,s=t("debugger.start_execution",{trans_id:n,port_num:i});r.ajax({url:s,method:"GET"}).done((function(t){"Success"===t.data.status?o.execute_query(n):"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while starting debugging session."))})).fail((function(){a.alert(e("Debugger Error"),e("Error while starting debugging session."))}))},execute_query:function(n){var i=this,o=t("debugger.execute_query",{trans_id:n,query_type:"wait_for_breakpoint"});r.ajax({url:o,method:"GET"}).done((function(t){"Success"===t.data.status?(null!=t.data.result[0].src&&null!=t.data.result[0].linenumber&&(h.DirectDebug.editor.setValue(t.data.result[0].src),i.setActiveLine(t.data.result[0].linenumber-2)),i.GetStackInformation(n),h.DirectDebug.debug_type&&i.poll_end_execution_result(n)):"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while executing requested debugging information."))})).fail((function(){a.alert(e("Debugger Error"),e("Error while executing requested debugging information."))}))},GetLocalVariables:function(n){var i=this,o=t("debugger.execute_query",{trans_id:n,query_type:"get_variables"});r.ajax({url:o,method:"GET"}).done((function(t){"Success"===t.data.status?(i.AddLocalVariables(t.data.result),i.AddParameters(t.data.result),h.DirectDebug.debug_restarted&&(h.DirectDebug.debug_type&&i.poll_end_execution_result(n),h.DirectDebug.debug_restarted=!1)):"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while fetching variable information."))})).fail((function(){a.alert(e("Debugger Error"),e("Error while fetching variable information."))}))},GetStackInformation:function(n){var i=this,o=t("debugger.execute_query",{trans_id:n,query_type:"get_stack_info"});r.ajax({url:o,method:"GET"}).done((function(t){"Success"===t.data.status?(i.AddStackInformation(t.data.result),i.GetLocalVariables(h.DirectDebug.trans_id)):"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while fetching stack information."))})).fail((function(){a.alert(e("Debugger Error"),e("Error while fetching stack information."))}))},poll_result:function(n){var o=this;if(h.DirectDebug.is_polling_required){var s,l=t("debugger.poll_result",{trans_id:n});s=h.DirectDebug.polling_timeout_idle?1e3:200,setTimeout((function(){r.ajax({url:l,method:"GET",beforeSend:function(e){e.setRequestHeader(i.csrf_token_header,i.csrf_token),r(".debugger-container").addClass("show_progress")}}).done((function(t){r(".debugger-container").removeClass("show_progress"),"Success"===t.data.status?null==t.data.result||0==t.data.result.length?o.poll_result(n):(h.DirectDebug.debug_type||h.DirectDebug.first_time_indirect_debug?(h.DirectDebug.polling_timeout_idle=!1,h.DirectDebug.docker.finishLoading(50),t.data.result[0].src!=h.DirectDebug.editor.getValue()&&(h.DirectDebug.editor.setValue(t.data.result[0].src),o.UpdateBreakpoint(n)),o.setActiveLine(t.data.result[0].linenumber-2),o.GetStackInformation(n)):(h.DirectDebug.docker.finishLoading(50),o.setActiveLine(-1),o.clear_all_breakpoint(n),o.execute_query(n),h.DirectDebug.first_time_indirect_debug=!0,h.DirectDebug.polling_timeout_idle=!1),setTimeout((function(){o.enable_toolbar_buttons()}),500)):"Busy"===t.data.status?(h.DirectDebug.polling_timeout_idle=!0,h.DirectDebug.debug_type||(h.DirectDebug.docker.startLoading(e("Waiting for another session to invoke the target...")),o.disable_toolbar_buttons(),h.DirectDebug.first_time_indirect_debug=!1),o.poll_result(n)):"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while polling result."))})).fail((function(){a.alert(e("Debugger Error"),e("Error while polling result."))}))}),s)}},update_messages:function(e){e=n.escape(e);var t,r="";r=(t=h.DirectDebug.messages_panel.$container.find(".messages").html())?(t+"\n"+e).replace(/(?:\r\n|\r|\n)/g,"<br />").replace(/(<br\ ?\/?>)+/g,"<br />"):e,h.DirectDebug.messages_panel.$container.find(".messages").html(r)},poll_end_execution_result:function(n){var i=this;if(h.DirectDebug.is_polling_required){var o,s=t("debugger.poll_end_execution_result",{trans_id:n});o=h.DirectDebug.polling_timeout_idle?1200:250,setTimeout((function(){r.ajax({url:s,method:"GET"}).done((function(t){"Success"===t.data.status?null==t.data.result?(i.setActiveLine(-1),h.DirectDebug.direct_execution_completed=!0,h.DirectDebug.polling_timeout_idle=!0,a.success(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),r(".debugger-container").removeClass("show_progress"),setTimeout((function(){i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!0)}),500),h.DirectDebug.is_polling_required=!1):null!=t.data.result&&(i.setActiveLine(-1),i.AddResults(t.data.col_info,t.data.result),h.DirectDebug.results_panel.focus(),h.DirectDebug.direct_execution_completed=!0,h.DirectDebug.polling_timeout_idle=!0,a.success(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),r(".debugger-container").removeClass("show_progress"),setTimeout((function(){i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!0)}),500),h.DirectDebug.is_polling_required=!1):"Busy"===t.data.status?(i.poll_end_execution_result(n),t.data.status_message&&i.update_messages(t.data.status_message)):"NotConnected"===t.data.status?a.alert(e("Debugger poll end execution error"),t.data.result):"ERROR"===t.data.status&&(h.DirectDebug.direct_execution_completed=!0,i.setActiveLine(-1),h.DirectDebug.is_user_aborted_debugging||a.error(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),h.DirectDebug.messages_panel.focus(),r(".debugger-container").removeClass("show_progress"),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),h.DirectDebug.is_user_aborted_debugging||(i.enable("continue",!0),h.DirectDebug.is_user_aborted_debugging=!1),h.DirectDebug.is_polling_required=!1)})).fail((function(){a.alert(e("Debugger Error"),e("Error while polling result."))}))}),o)}},Restart:function(n){var i=this,o=t("debugger.restart",{trans_id:n});i.disable_toolbar_buttons(),h.DirectDebug.messages_panel.$container.find(".messages").html(""),r.ajax({url:o}).done((function(o){var s=o.data.restart_debug?1:0;if(h.DirectDebug.polling_timeout_idle=!1,h.DirectDebug.is_polling_required=!0,i.poll_result(n),s&&(h.DirectDebug.debug_restarted=!0),o.data.result.require_input)c(o.data.result,s);else{var l=t("debugger.start_listener",{trans_id:n});r.ajax({url:l,method:"GET"}).done((function(){h.DirectDebug.debug_type&&i.poll_end_execution_result(n)})).fail((function(){a.alert(e("Debugger Error"),e("Error while polling result."))}))}})).fail((function(t){try{var r=JSON.parse(t.responseText);0==r.success&&a.alert(e("Debugger Error"),r.errormsg)}catch(e){console.warn(e.stack||e)}}))},Continue:function(n){var i=this;if(i.disable_toolbar_buttons(),h.DirectDebug.direct_execution_completed&&h.DirectDebug.direct_execution_completed==h.DirectDebug.polling_timeout_idle)i.Restart(n);else{var o=t("debugger.execute_query",{trans_id:n,query_type:"continue"});r.ajax({url:o,method:"GET"}).done((function(t){t.data.status?i.poll_result(n):a.alert(e("Debugger Error"),e("Error while executing continue in debugging session."))})).fail((function(){a.alert(e("Debugger Error"),e("Error while executing continue in debugging session."))}))}},Step_over:function(n){var i=this;i.disable_toolbar_buttons();var o=t("debugger.execute_query",{trans_id:n,query_type:"step_over"});r.ajax({url:o,method:"GET"}).done((function(t){t.data.status?i.poll_result(n):a.alert(e("Debugger Error"),e("Error while executing step over in debugging session."))})).fail((function(){a.alert(e("Debugger Error"),e("Error while executing step over in debugging session."))}))},Step_into:function(n){var i=this;i.disable_toolbar_buttons();var o=t("debugger.execute_query",{trans_id:n,query_type:"step_into"});r.ajax({url:o,method:"GET"}).done((function(t){t.data.status?i.poll_result(n):a.alert(e("Debugger Error"),e("Error while executing step into in debugging session."))})).fail((function(){a.alert(e("Debugger Error"),e("Error while executing step into in debugging session."))}))},Stop:function(n){var i=this;i.disable_toolbar_buttons();var o=t("debugger.execute_query",{trans_id:n,query_type:"abort_target"});r.ajax({url:o,method:"GET"}).done((function(t){t.data.status?(i.setActiveLine(-1),h.DirectDebug.direct_execution_completed=!0,h.DirectDebug.is_user_aborted_debugging=!0,h.DirectDebug.is_polling_required=!1,i.enable("continue",!1),a.success(t.info,3)):"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while executing stop in debugging session."))})).fail((function(){a.alert(e("Debugger Error"),e("Error while executing stop in debugging session."))}))},toggle_breakpoint:function(n){var i=this;i.disable_toolbar_buttons();var o="";o=null==h.DirectDebug.editor.lineInfo(i.active_line_no).gutterMarkers?t("debugger.set_breakpoint",{trans_id:n,line_no:i.active_line_no+1,set_type:"1"}):t("debugger.set_breakpoint",{trans_id:n,line_no:i.active_line_no+1,set_type:"0"}),r.ajax({url:o,method:"GET"}).done((function(t){var r;t.data.status?(null!=h.DirectDebug.editor.lineInfo(i.active_line_no).gutterMarkers?h.DirectDebug.editor.setGutterMarker(i.active_line_no,"breakpoints",null):h.DirectDebug.editor.setGutterMarker(i.active_line_no,"breakpoints",((r=document.createElement("div")).style.color="#822",r.innerHTML="●",r)),i.enable_toolbar_buttons()):"NotConnected"===t.data.status&&a.alert(e("Debugger Error"),e("Error while toggling breakpoint."))})).fail((function(){a.alert(e("Debugger Error"),e("Error while toggling breakpoint."))}))},clear_all_breakpoint:function(n){var i=this,o=i.GetBreakpointInformation(n);if(1!=o.length||-1!=o[0].linenumber){i.disable_toolbar_buttons();for(var s=new Array,l=0;l<o.length;l++)-1!=o[l].linenumber&&s.push(o[l].linenumber);var u=t("debugger.clear_all_breakpoint",{trans_id:n});r.ajax({url:u,method:"POST",data:{breakpoint_list:s.join()}}).done((function(e){if(e.data.status)for(var t=0;t<s.length;t++){var r=h.DirectDebug.editor.lineInfo(s[t]-1);r&&null!=r.gutterMarkers&&h.DirectDebug.editor.setGutterMarker(s[t]-1,"breakpoints",null)}i.enable_toolbar_buttons()})).fail((function(){a.alert(e("Debugger Error"),e("Error while clearing all breakpoint."))}))}},AddStackInformation:function(t){var r=this;r.stack_grid&&(r.stack_grid.remove(),r.stack_grid=null);for(var n=s.Model.extend({defaults:{frame_id:0,name:void 0,value:void 0,line_no:void 0}}),a=s.Collection.extend({model:n}),i=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",editable:!1,cell:"string"},{name:"line_no",label:e("Line No."),type:"text",editable:!1,cell:"string"}],o=[],u=0;u<t.length;u++)o.push({frame_id:u,name:t[u].targetname,value:t[u].args,line_no:t[u].linenumber});var d=this.stackColl=new a(o);this.stackColl.on("backgrid:row:selected",r.select_frame,r);var c=this.stack_grid=new l.Grid({emptyText:e("No data found"),columns:i,row:l.Row.extend({events:{click:"rowClick"},rowClick:function(){r.frame_id=this.model.get("frame_id"),this.model.trigger("backgrid:row:selected",this),r.stack_grid.$el.find("td").css("background-color",this.disabledColor),this.$el.find("td").css("background-color",this.highlightColor)}}),collection:d,className:"backgrid table table-bordered table-noouter-border table-bottom-border"});c.render(),h.DirectDebug.stack_pane_panel.$container.find(".stack_pane").append(c.el)},AddResults:function(t,r){this.result_grid&&(this.result_grid.remove(),this.result_grid=null);var a=s.Model.extend({defaults:{name:void 0}}),i=s.Collection.extend({model:a}),o=[];n.size(t)&&n.each(t,(function(e){var t={type:"text",editable:!1,cell:"string"};t.name=t.label=e.name,o.push(t)}));var u=this.result_grid=new l.Grid({emptyText:e("No data found"),columns:o,collection:new i(r),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});u.render(),h.DirectDebug.results_panel.$container.find(".debug_results").append(u.el)},AddLocalVariables:function(t){this.variable_grid&&(this.variable_grid.remove(),this.variable_grid=null);var r=s.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),n=s.Collection.extend({model:r});n.prototype.on("change",this.deposit_parameter_value,this);var a=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",cell:"string"}],i=[];if(0!=t.length)for(var o=0;o<t.length;o++)"L"==t[o].varclass&&i.push({name:t[o].name,type:t[o].dtype,value:t[o].value});var u=this.variable_grid=new l.Grid({emptyText:e("No data found"),columns:a,collection:new n(i),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});u.collection.on("backgrid:edited",(function(e,t,r){p.setFocusToDebuggerEditor(h.DirectDebug.editor,r)})),u.render(),h.DirectDebug.local_variables_panel.$container.find(".local_variables").append(u.el)},AddParameters:function(t){this.param_grid&&(this.param_grid.remove(),this.param_grid=null);var r=s.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),n=this.ParametersCollection=s.Collection.extend({model:r});n.prototype.on("change",this.deposit_parameter_value,this);var a=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",cell:"string"}],i=[];if(0!=t.length)for(var o=0;o<t.length;o++)"A"==t[o].varclass&&i.push({name:t[o].name,type:t[o].dtype,value:t[o].value});var u=this.param_grid=new l.Grid({emptyText:e("No data found"),columns:a,collection:new n(i),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});u.collection.on("backgrid:edited",(function(e,t,r){p.setFocusToDebuggerEditor(h.DirectDebug.editor,r)})),u.render(),h.DirectDebug.parameters_panel.$container.find(".parameters").append(u.el)},deposit_parameter_value:function(n){var i=this,o=[];o.push({name:n.get("name"),type:n.get("type"),value:n.get("value")});var s=t("debugger.deposit_value",{trans_id:h.DirectDebug.trans_id});r.ajax({url:s,method:"POST",data:{data:JSON.stringify(o)}}).done((function(e){e.data.status&&(i.GetLocalVariables(h.DirectDebug.trans_id),e.data.result?a.success(e.data.info,3):a.error(e.data.info,3))})).fail((function(){a.alert(e("Debugger Error"),e("Error while depositing variable value."))}))},select_frame:function(){var n=this,i=t("debugger.select_frame",{trans_id:h.DirectDebug.trans_id,frame_id:n.frame_id});r.ajax({url:i,method:"GET"}).done((function(e){e.data.status&&(h.DirectDebug.editor.setValue(e.data.result[0].src),n.UpdateBreakpoint(h.DirectDebug.trans_id),n.setActiveLine(e.data.result[0].linenumber-2),n.GetLocalVariables(h.DirectDebug.trans_id))})).fail((function(){a.alert(e("Debugger Error"),e("Error while selecting frame."))}))}});var m=s.View.extend({el:".debugger_main_container",initialize:function(){v.on("pgDebugger:button:state:stop",this.enable_stop,this),v.on("pgDebugger:button:state:step_over",this.enable_step_over,this),v.on("pgDebugger:button:state:step_into",this.enable_step_into,this),v.on("pgDebugger:button:state:continue",this.enable_continue,this),v.on("pgDebugger:button:state:toggle_breakpoint",this.enable_toggle_breakpoint,this),v.on("pgDebugger:button:state:clear_all_breakpoints",this.enable_clear_all_breakpoints,this)},events:{"click .btn-stop":"on_stop","click .btn-clear-breakpoint":"on_clear_all_breakpoint","click .btn-toggle-breakpoint":"on_toggle_breakpoint","click .btn-continue":"on_continue","click .btn-step-over":"on_step_over","click .btn-step-into":"on_step_into",keydown:"keyAction"},enable_stop:function(e){var t=this.$el.find(".btn-stop");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_over:function(e){var t=this.$el.find(".btn-step-over");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_into:function(e){var t=this.$el.find(".btn-step-into");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_continue:function(e){var t=this.$el.find(".btn-continue");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_toggle_breakpoint:function(e){var t=this.$el.find(".btn-toggle-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_clear_all_breakpoints:function(e){var t=this.$el.find(".btn-clear-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},on_stop:function(){v.Stop(h.DirectDebug.trans_id)},on_clear_all_breakpoint:function(){v.clear_all_breakpoint(h.DirectDebug.trans_id)},on_toggle_breakpoint:function(){v.toggle_breakpoint(h.DirectDebug.trans_id)},on_continue:function(){v.Continue(h.DirectDebug.trans_id)},on_step_over:function(){v.Step_over(h.DirectDebug.trans_id)},on_step_into:function(){v.Step_into(h.DirectDebug.trans_id)},keyAction:function(e){var t;t=f.processEventDebugger(this.$el,e,this.preferences,h.DirectDebug.docker),n.isNull(t)||n.isUndefined(t)||""==t||setTimeout((function(){o.Events.trigger("pgadmin:debugger:".concat(t,":focus"))}),100)}}),y=function(){};return n.extend(y.prototype,{load:function(i,o,s,l){var u=this;if(n.bindAll(h.DirectDebug,"messages"),!this.initialized){var d;this.initialized=!0,this.trans_id=i,this.debug_type=o,this.first_time_indirect_debug=!1,this.direct_execution_completed=!1,this.polling_timeout_idle=!1,this.debug_restarted=!1,this.is_user_aborted_debugging=!1,this.is_polling_required=!0,this.function_name_with_arguments=s,this.layout=l;var c=g.default.pgAdmin.Browser;this.preferences=c.get_preferences_for_module("debugger"),this.docker=new b("#container",{allowContextMenu:!1,allowCollapse:!1,loadingClass:"pg-sp-icon",themePath:t("static",{filename:"css"}),theme:"webcabin.overrides.css"}),this.panels=[],null==i||o?null!=i?(d=t("debugger.start_listener",{trans_id:i}),r.ajax({url:d,method:"GET"}).done((function(e){e.data.status&&u.messages(i)})).fail((function(t){try{var r=JSON.parse(t.responseText);0==r.success&&a.alert(e("Debugger Error"),r.errormsg)}catch(t){a.alert(e("Debugger Error"),e("Error while starting debugging listener."))}}))):this.intializePanels():(d=t("debugger.start_listener",{trans_id:i}),r.ajax({url:d,method:"GET"}).done((function(e){e.data.status&&(u.intializePanels(),v.enable_toolbar_buttons(),v.poll_result(i))})).fail((function(t){try{var r=JSON.parse(t.responseText);0==r.success&&a.alert(e("Debugger Error"),r.errormsg)}catch(t){a.alert(e("Debugger Error"),e("Error while starting debugging listener."))}})))}},messages:function(n){var i=this,o=t("debugger.messages",{trans_id:n});r.ajax({url:o,method:"GET"}).done((function(t){"Success"===t.data.status?(i.intializePanels(),v.enable_toolbar_buttons(),v.start_execution(n,t.data.result)):"Busy"===t.data.status?i.messages(n):"NotConnected"===t.data.status&&a.alert(e("Not connected to server or connection with the server has been closed."),t.data.result)})).fail((function(){a.alert(e("Debugger Error"),e("Error while fetching messages information."))}))},onBreakPoint:function(e,t,r){var n;if("breakpoints"==r&&!h.DirectDebug.polling_timeout_idle){var a=e.lineInfo(t);null==a.gutterMarkers||null==a.gutterMarkers.breakpoints?v.set_breakpoint(this.trans_id,t+1,1):v.set_breakpoint(this.trans_id,t+1,0);var i=a.gutterMarkers;null!=i&&null==a.gutterMarkers.breakpoints&&(i=a.gutterMarkers.breakpoints),e.setGutterMarker(t,"breakpoints",i?null:((n=document.createElement("div")).style.color="#822",n.innerHTML="●",n))}},buildDefaultLayout:function(e){var t=e.addPanel("code",b.DOCK.TOP),r=e.addPanel("parameters",b.DOCK.BOTTOM,t);e.addPanel("local_variables",b.DOCK.STACKED,r,{tabOrientation:b.TAB.TOP}),e.addPanel("messages",b.DOCK.STACKED,r),e.addPanel("results",b.DOCK.STACKED,r),e.addPanel("stack_pane",b.DOCK.STACKED,r)},intializePanels:function(){var t=this;this.registerPanel("code",t.function_name_with_arguments,"100%","50%",(function(){var r=new i.Browser.Panel({name:"parameters",title:e("Parameters"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="parameters" class="parameters" tabindex="0"></div>'}),n=new i.Browser.Panel({name:"local_variables",title:e("Local variables"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="local_variables" class="local_variables" tabindex="0"></div>'}),a=new i.Browser.Panel({name:"messages",title:e("Messages"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div role="status" id="messages" class="messages" tabindex="0"></div>'}),o=new i.Browser.Panel({name:"results",title:e("Results"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="debug_results" class="debug_results" tabindex="0"></div>'}),s=new i.Browser.Panel({name:"stack_pane",title:e("Stack"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="stack_pane" class="stack_pane" tabindex="0"></div>'});r.load(t.docker),n.load(t.docker),a.load(t.docker),o.load(t.docker),s.load(t.docker)})),o.restore_layout(t.docker,t.layout,this.buildDefaultLayout.bind(this)),t.docker.on(b.EVENT.LAYOUT_CHANGED,(function(){o.save_current_layout("Debugger/Layout",t.docker)})),t.code_editor_panel=t.docker.findPanels("code")[0],t.parameters_panel=t.docker.findPanels("parameters")[0],t.local_variables_panel=t.docker.findPanels("local_variables")[0],t.messages_panel=t.docker.findPanels("messages")[0],t.results_panel=t.docker.findPanels("results")[0],t.stack_pane_panel=t.docker.findPanels("stack_pane")[0];var n=r('<div id="stack_editor_pane" class="pg-panel-content info"></div>'),s=r('<textarea aria-label="Code editor area" id="debugger-editor-textarea"></textarea>').appendTo(n);t.code_editor_panel.layout().addItem(n),t.editor=_.fromTextArea(s.get(0),{tabindex:-1,lineNumbers:!0,foldOptions:{widget:"…"},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","breakpoints"],mode:"text/x-pgsql",readOnly:!0,extraKeys:i.Browser.editor_shortcut_keys,indentWithTabs:i.Browser.editor_options.indent_with_tabs,indentUnit:i.Browser.editor_options.tabSize,tabSize:i.Browser.editor_options.tabSize,lineWrapping:i.Browser.editor_options.wrapCode,autoCloseBrackets:i.Browser.editor_options.insert_pair_brackets,matchBrackets:i.Browser.editor_options.brace_matching,screenReaderLabel:e("Debugger SQL editor")}),_.on(t.editor,"keydown",(function(e,t){27==t.keyCode&&document.activeElement.blur()})),o.Events.on("pgadmin:debugger:code:focus",(function(){t.editor.focus()}));t.docker.startLoading(e("Loading...")),t.docker.on(b.EVENT.LOADED,(function(){t.docker.finishLoading(100),t.docker.off(b.EVENT.LOADED),t.editor.on("gutterClick",t.onBreakPoint.bind(t),t),t.docker.$container&&t.docker.$container.parent().focus();var e=setInterval((function(){try{var r=g.default.pgAdmin.Browser;if(r.preference_version()>0){clearInterval(e),t.reflectPreferences();var n=r.get_preferences_for_module("browser").new_browser_tab_open;if(n&&n.includes("debugger")){o.bind_beforeunload();var a=setInterval((function(){g.default.pgAdmin?t.reflectPreferences():clearInterval(a)}),1e3)}}}catch(t){throw clearInterval(e),t}}),0)})),this.toolbarView=new m,r(window).on("keydown",(function(e){t.toolbarView.keyAction&&t.toolbarView.keyAction(e)})),g.default.pgAdmin.Browser.onPreferencesChange("debugger",(function(){t.reflectPreferences()})),o.register_to_activity_listener(document,(function(){a.alert(e("Timeout"),e("Your session has timed out due to inactivity. Please close the window and login again."))})),v.poll_result=o.override_activity_event_decorator(v.poll_result).bind(v),v.poll_end_execution_result=o.override_activity_event_decorator(v.poll_end_execution_result).bind(v)},reflectPreferences:function(){var t=g.default.pgAdmin.Browser;this.preferences=t.get_preferences_for_module("debugger"),this.toolbarView.preferences=this.preferences,this.toolbarView.$el.find("#btn-step-into").attr("title",f.shortcut_accesskey_title(e("Step into"),this.preferences.btn_step_into)).attr("aria-label",f.shortcut_accesskey_title(e("Step into"),this.preferences.btn_step_into)).attr("accesskey",f.shortcut_key(this.preferences.btn_step_into)),this.toolbarView.$el.find("#btn-step-over").attr("title",f.shortcut_accesskey_title(e("Step over"),this.preferences.btn_step_over)).attr("aria-label",f.shortcut_accesskey_title(e("Step over"),this.preferences.btn_step_over)).attr("accesskey",f.shortcut_key(this.preferences.btn_step_over)),this.toolbarView.$el.find("#btn-continue").attr("title",f.shortcut_accesskey_title(e("Continue/Start"),this.preferences.btn_start)).attr("aria-label",f.shortcut_accesskey_title(e("Continue/Start"),this.preferences.btn_start)).attr("accesskey",f.shortcut_key(this.preferences.btn_start)),this.toolbarView.$el.find("#btn-toggle-breakpoint").attr("title",f.shortcut_accesskey_title(e("Toggle breakpoint"),this.preferences.btn_toggle_breakpoint)).attr("aria-label",f.shortcut_accesskey_title(e("Toggle breakpoint"),this.preferences.btn_toggle_breakpoint)).attr("accesskey",f.shortcut_key(this.preferences.btn_toggle_breakpoint)),this.toolbarView.$el.find("#btn-clear-breakpoint").attr("title",f.shortcut_accesskey_title(e("Clear all breakpoints"),this.preferences.btn_clear_breakpoints)).attr("aria-label",f.shortcut_accesskey_title(e("Clear all breakpoints"),this.preferences.btn_clear_breakpoints)).attr("accesskey",f.shortcut_key(this.preferences.btn_clear_breakpoints)),this.toolbarView.$el.find("#btn-stop").attr("title",f.shortcut_accesskey_title(e("Stop"),this.preferences.btn_stop)).attr("aria-label",f.shortcut_accesskey_title(e("Stop"),this.preferences.btn_stop)).attr("accesskey",f.shortcut_key(this.preferences.btn_stop))},registerPanel:function(e,t,n,a,i){var o=this;this.docker.registerPanelType(e,{title:t,isPrivate:!0,onCreate:function(s){o.panels[e]=s,s.initSize(n,a),t?s.title(t):s.title(!1),s.closeable(!1),s.layout().addItem(r('<div tabindex="0">',{class:"pg-debugger-panel"})),i&&i.apply(o,[s])}})}}),h.DirectDebug=new y,h.DirectDebug.jquery=r,h.DirectDebug}.apply(t,n))||(e.exports=a)},39:function(e,t,r){"use strict";(function(e){function r(t){var r=0,a=0,i={};do{var o=t.getData();if(o._type in this.Nodes&&this.Nodes[o._type].hasId){var s=n(o._type,a);void 0===i[s]&&(i[s]=e.extend({},o,{priority:r}),r-=1)}a+=1,t=t.hasParent()?t.parent():null}while(t);return i}function n(e,t){return"partition"===e&&t>0?"table":e}Object.defineProperty(t,"__esModule",{value:!0}),t.getTreeNodeHierarchyFromElement=function(e,t){return r.call(e,t)},t.getTreeNodeHierarchyFromIdentifier=function(e){var t=this.treeMenu.translateTreeNodeIdFromACITree(e),n=this.treeMenu.findNode(t);return null===n?null:r.call(this,n)},t.getTreeNodeHierarchy=r}).call(this,r(1))},5:function(e,t,r){"use strict";var n,a;r(4),r(8),n=[r(101)],void 0===(a=function(e){return function(t,r){var n=e[t],a=n;return n?a=a.replace(/([<])([^:^>]*:)?([^>]+)([>])/g,(function(e,t,n,a){return a in r?r[a]:e})):n}}.apply(t,n))||(e.exports=a)},56:function(e,t,r){"use strict";(function(e){r(9),r(58),r(4),r(33),r(8),Object.defineProperty(t,"__esModule",{value:!0}),t.getDatabaseLabel=s,t.getPanelTitle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.get_preferences_for_module("browser");null==t&&null==a&&(t=e.treeMenu.selected());if(null==a&&l(a=n.getTreeNodeHierarchyFromIdentifier.call(e,t)))return;var o=s(a),u="";u=r||i.qt_tab_title_placeholder;var c={database:o,username:a.server.user.name,server:a.server.label,type:"query_tool"},f=d(u,c);return f},t.setQueryToolDockerTitle=function(t,r,n,i){var o="",s="";u(t,i),i||"true"==i?(s=(0,a.default)("File - ")+n,o="fa fa-file-alt"):"false"==r||0==r?(s=(0,a.default)("View/Edit Data - ")+n,o="pg-font-icon icon-view-data"):(s=(0,a.default)("Query Tool - ")+n,o="pg-font-icon icon-query-tool");t.title('<span title="'+e.escape(s)+'">'+e.escape(n)+"</span>"),t.icon(o)},t.set_renamable_option=u,t.generateTitle=d;var n=r(39),a=o(r(2)),i=o(r(0));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return e.database?e.database.label:e.server.db}function l(e){return void 0===e.server}function u(e,t){t||"true"==t?(e.renamable(!1),(0,i.default)(".conn-info-dd").hide(),(0,i.default)(".connection-data").css({pointerEvents:"none",cursor:"arrow"})):e.renamable(!0)}function d(t,r){return"query_tool"==r.type?t=(t=(t=t.replace(new RegExp("%DATABASE%"),e.unescape(r.database))).replace(new RegExp("%USERNAME%"),e.unescape(r.username))).replace(new RegExp("%SERVER%"),e.unescape(r.server)):"datagrid"==r.type?t=(t=(t=(t=(t=t.replace(new RegExp("%DATABASE%"),e.unescape(r.database))).replace(new RegExp("%USERNAME%"),e.unescape(r.username))).replace(new RegExp("%SERVER%"),e.unescape(r.server))).replace(new RegExp("%SCHEMA%"),e.unescape(r.schema))).replace(new RegExp("%TABLE%"),e.unescape(r.table)):"debugger"==r.type&&(t=(t=(t=(t=t.replace(new RegExp("%FUNCTION%"),e.unescape(r.function_name))).replace(new RegExp("%ARGS%"),e.unescape(r.args))).replace(new RegExp("%SCHEMA%"),e.unescape(r.schema))).replace(new RegExp("%DATABASE%"),e.unescape(r.database))),e.escape(t)}}).call(this,r(1))},59:function(e,t,r){"use strict";var n,a;r(18),r(46),r(158),r(67),r(4),r(8),n=[r(0),r(1),r(2),r(5)],void 0===(a=function(e,t,r,n){var a={epicRandomString:function(e){for(var t=[],r=0;r<36;r++)t[r]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]="0123456789abcdef".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("").replace(/-/g,"").substr(0,e)},getHash:function(e){for(var t=0,r=e.length,n=0;n<r;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t},calculateColumnWidth:function(t){e("body").append('<span id="pg_text" style="visibility: hidden;">'+t+"</span>");var r=e("#pg_text").width()+23;return e("#pg_text").remove(),r},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},previousStatus:null,fetchConnectionStatus:function(t,i,o){var s=n("sqleditor.connection_status",{trans_id:t.transId});if("visible"===document.visibilityState&&"visible"===i.data("panel-visible")&&!o.hasClass("obtaining-conn")){var l=t;e.ajax({url:s,method:"GET"}).done((function(e){if(e&&e.data){var t=e.data.status,n=e.data.message,s=!1;switch(l.update_notifications(e.data.notifies),t){case 1:t!=a.previousStatus||o.hasClass("fa-hourglass-half")||(o.removeClass().addClass("fa fa-hourglass-half"),s=!0);break;case 2:a.previousStatus==t||o.hasClass("fa-clock")||(o.removeClass().addClass("fa fa-clock"),s=!0);break;case 3:a.previousStatus==t||o.hasClass("fa-exclamation-circle")||(o.removeClass().addClass("fa fa-exclamation-circle"),s=!0);break;case 4:a.previousStatus==t||o.hasClass("fa-exclamation-triangle")||(o.removeClass().addClass("fa fa-exclamation-triangle"),s=!0);break;default:a.previousStatus==t||o.hasClass("fa-query_tool_connected")||(o.removeClass().addClass("pg-font-icon icon-query-tool-connected"),s=!0)}a.previousStatus=t,s&&(i.popover("hide"),i.attr("data-content",n))}else a.previousStatus=-99,n=r("An unexpected error occurred - ensure you are logged into the application."),i.attr("data-content",n),o.hasClass("icon-query-tool-disconnected")||(i.popover("hide"),o.removeClass().addClass("pg-icon-font icon-query-tool-disconnected"))})).fail((function(e){a.previousStatus=-1;var t=r("Transaction status check failed.");0==e.readyState?t=r("Not connected to the server or the connection to the server has been closed."):e.responseJSON&&e.responseJSON.errormsg&&(t=e.responseJSON.errormsg),i.attr("data-content",t),o.hasClass("icon-query-tool-disconnected")||(i.popover("hide"),o.removeClass().addClass("pg-font-icon icon-query-tool-disconnected"))}))}},updateConnectionStatusFlag:function(t){var r=e(".connection_status");r.data("panel-visible")!=t&&r.data("panel-visible",t)},calcFontSize:function(e){if(e){e=parseFloat(Math.round(parseFloat(e+"e+2"))+"e-2");var t=Number(e);if(t>0)return t+"em"}return"1em"},addEditableIcon:function(e,r){var n={cssClass:"editable-column-header-icon",content:r?'<i class="fa fa-pencil-alt"></i>':'<i class="fa fa-lock"></i>'};t.isUndefined(e.header)||t.isUndefined(e.header.buttons)?e.header={buttons:[n]}:e.header.buttons.push(n)}};return a}.apply(t,n))||(e.exports=a)},68:function(e,t,r){"use strict";r(20),r(50),r(7),r(4),r(57),Object.defineProperty(t,"__esModule",{value:!0}),t.processEventDebugger=function(e,t,r,a){var i,o,s="";this.validateShortcutKeys(r.edit_grid_values,t)?(this._stopEventPropagation(t),(i=e.find('div.wcPanelTabContent:not(".wcPanelTabContentHidden")')).length&&(o=(0,n.default)(i).find("td.editable:first")).length&&o.trigger("click")):this.validateShortcutKeys(r.move_next,t)?(this._stopEventPropagation(t),s=l(a,"right")):this.validateShortcutKeys(r.move_previous,t)?(this._stopEventPropagation(t),s=l(a,"left")):this.validateShortcutKeys(r.switch_panel,t)&&(this._stopEventPropagation(t),s=l(a,"switch"));return s},t.processEventQueryTool=function(e,t,r,a){if(e.isQueryRunning())return;var i=r.which||r.keyCode,o="",s=e.preferences.execute_query,u=e.preferences.explain_query,d=e.preferences.explain_analyze_query,c=e.preferences.download_results,f=e.preferences.move_next,p=e.preferences.move_previous,g=e.preferences.switch_panel,_=e.preferences.toggle_case,b=e.preferences.commit_transaction,h=e.preferences.rollback_transaction,v=e.preferences.save_data,m=e.preferences.show_query_tool;if(this.validateShortcutKeys(s,r))this._stopEventPropagation(r),t.executeQuery(e);else if(this.validateShortcutKeys(u,r))this._stopEventPropagation(r),t.explain(e);else if(this.validateShortcutKeys(d,r))this._stopEventPropagation(r),t.explainAnalyze(e);else if(this.validateShortcutKeys(c,r))e.is_save_results_to_file_disabled||(this._stopEventPropagation(r),t.download(e));else if(this.validateShortcutKeys(_,r))this._stopEventPropagation(r),t.toggleCaseOfSelectedText(e);else if(this.validateShortcutKeys(b,r))e.is_transaction_buttons_disabled||(this._stopEventPropagation(r),t.executeCommit(e));else if(this.validateShortcutKeys(h,r))e.is_transaction_buttons_disabled||(this._stopEventPropagation(r),t.executeRollback(e));else if(this.validateShortcutKeys(v,r))this._stopEventPropagation(r),t.saveDataChanges(e);else if(this.validateShortcutKeys(m,r))this._stopEventPropagation(r),t.openQueryTool(e);else if((this.isMac()&&r.metaKey||!this.isMac()&&r.ctrlKey)&&!r.altKey&&r.shiftKey&&191===i)this._stopEventPropagation(r),t.commentBlockCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(r)&&r.metaKey||!this.isMac()&&!this.isKeyAltShift(r)&&r.ctrlKey)&&191===i)this._stopEventPropagation(r),t.commentLineCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(r)&&r.metaKey||!this.isMac()&&!this.isKeyAltShift(r)&&r.ctrlKey)&&190===i)this._stopEventPropagation(r),t.uncommentLineCode(e);else if((this.isMac()&&r.metaKey||!this.isMac()&&r.ctrlKey)&&!r.altKey&&r.shiftKey&&75===i)this._stopEventPropagation(r),t.formatSql(e);else if(27==i)t.focusOut(e),(0,n.default)(r.target).hasClass("dropdown-item")&&(0,n.default)(r.target).closest(".dropdown-submenu").length>0&&(0,n.default)(r.target).closest(".dropdown-submenu").find(".dropdown-menu").removeClass("show");else if(this.validateShortcutKeys(f,r))this._stopEventPropagation(r),o=l(a,"right");else if(this.validateShortcutKeys(p,r))this._stopEventPropagation(r),o=l(a,"left");else if(this.validateShortcutKeys(g,r))this._stopEventPropagation(r),o=l(a,"switch");else if(38===i||40===i){if((0,n.default)(r.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(r);var y=(0,n.default)(r.target).closest("li");for((0,n.default)(r.target).closest(".dropdown-menu").find(".show").removeClass("show"),38===i?y=y.prev():40===i&&(y=y.next());y.hasClass("dropdown-divider")||y.hasClass("d-none")||y.find(".dropdown-item").first().hasClass("disabled");)38===i?y=y.prev():40===i&&(y=y.next());y.find(".dropdown-item").trigger("focus")}}else if(37===i||39===i){if((0,n.default)(r.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(r);var w=(0,n.default)(r.target).closest("li");if(39===i)w.hasClass("dropdown-submenu")&&(w.find(".dropdown-menu").addClass("show"),w.find(".dropdown-menu .dropdown-item").first().trigger("focus"));else if(37===i){var k=w.closest(".dropdown-menu");k.closest(".dropdown-submenu").length>0&&(k.removeClass("show"),(w=k.closest(".dropdown-submenu")).find(".dropdown-item").trigger("focus"))}}}else{var D=this.validateMacros(e,r);!1!==D&&(this._stopEventPropagation(r),t.executeMacro(e,D))}return o},t.focusDockerPanel=l,t.validateShortcutKeys=function(e,t){if(!e)return!1;var r=t.which||t.keyCode;return e.alt==t.altKey&&e.shift==t.shiftKey&&e.control==t.ctrlKey&&e.key.key_code==r},t.validateMacros=function(e,t){var r=t.which||t.keyCode,n=e.macros.filter((function(e){return e.alt==t.altKey&&e.control==t.ctrlKey&&e.key_code==r}));if(1==n.length)return n[0].id;return!1},t._stopEventPropagation=function(e){e.cancelBubble=!0,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},t.isMac=function(){return-1!=window.navigator.platform.search("Mac")},t.isKeyCtrlAlt=function(e){return e.ctrlKey||e.altKey},t.isKeyAltShift=function(e){return e.altKey||e.shiftKey},t.isKeyCtrlShift=function(e){return e.ctrlKey||e.shiftKey},t.isKeyCtrlAltShift=function(e){return e.ctrlKey||e.altKey||e.shiftKey},t.isAltShiftBoth=function(e){return e.altKey&&e.shiftKey&&!e.ctrlKey},t.isCtrlShiftBoth=function(e){return e.ctrlKey&&e.shiftKey&&!e.altKey},t.isCtrlAltBoth=function(e){return e.ctrlKey&&e.altKey&&!e.shiftKey},t.shortcut_key=s,t.shortcut_title=function(e,t){var r="";if(null==t)return r;t.alt&&(r=(0,a.default)("Alt")+"+");t.shift&&(r+=(0,a.default)("Shift")+"+");t.control&&(r+=(0,a.default)("Ctrl")+"+");return r+=s(t),"".concat(e," (").concat(r,")")},t.shortcut_accesskey_title=function(e,t){return"".concat(e," (")+(0,a.default)("accesskey")+" + ".concat(s(t),")")};var n=o(r(0)),a=o(r(2)),i=r(16);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){var t="";return e.key&&e.key.char&&(t=e.key.char.toUpperCase()),t}function l(e,t){if(e){if(!e._focusFrame){if(0==e._frameList.length&&0==e._frameList[0]._panelList.length)return;e._frameList[0]._panelList[e._frameList[0]._curTab].focus()}var r=e._focusFrame,n=0,a=!1;if("switch"==t){var o,s=e._frameList.length;for(o=0;o<s&&r!==e._frameList[o];o++);n=(r=e._frameList[(0,i.getMod)(o+1,s)])._curTab,a=!0}else"left"==t?n=(0,i.getMod)(r._curTab-1,r._panelList.length):"right"==t&&(n=(0,i.getMod)(r._curTab+1,r._panelList.length));var l=r._panelList[n];return l.$container.find('*[tabindex]:not([tabindex="-1"])').trigger("focus"),l.focus(a),l._type}}},77:function(e,t,r){"use strict";r(20),r(34),r(41),Object.defineProperty(t,"__esModule",{value:!0}),t.showQueryTool=function(e,t,r,a,s,l){var u=a||"",f=function(e,t){return(0,o.getPanelTitle)(e,t)}(t,s);if(void 0===t.treeMenu.findNodeByDomElement(s))return void r.alert((0,n.default)("Query Tool Error"),(0,n.default)("No object selected."));var p=i.getTreeNodeHierarchyFromIdentifier.call(t,s);if(function(e){return void 0===e.server}(p))return;var g=d(l,f,p);c(e,l,g,f,u,r)},t.generateScript=function(e,t,r){var n="".concat(e.database,"/").concat(e.user,"@").concat(e.server),i=(0,s.getRandomInt)(1,9999999),o=(0,a.default)("datagrid.panel",{trans_id:i});o+="?is_query_tool=".concat(!0)+"&sgid=".concat(e.sgid)+"&sid=".concat(e.sid)+"&server_type=".concat(e.stype)+"&did=".concat(e.did),c(t,i,o,n,"",r)},t.showERDSqlTool=function(e,t,r,n,a){var i=(0,s.getRandomInt)(1,9999999);e={server_group:{_id:e.sgid},server:{_id:e.sid,server_type:e.stype},database:{_id:e.did}};var o=d(i,r,e,t);c(n,i,o,r,"",a)},t.launchDataGrid=c,t._set_dynamic_tab=function(e,t){e.docker.findPanels("frm_datagrid").forEach((function(e){t?(0,l.default)("#"+e.$title.index()+" div:first").addClass("wcPanelTab-dynamic"):(0,l.default)("#"+e.$title.index()+" div:first").removeClass("wcPanelTab-dynamic")})),e.docker.findPanels("frm_debugger").forEach((function(e){t?(0,l.default)("#"+e.$title.index()+" div:first").addClass("wcPanelTab-dynamic"):(0,l.default)("#"+e.$title.index()+" div:first").removeClass("wcPanelTab-dynamic")}))};var n=u(r(2)),a=u(r(5)),i=r(39),o=r(56),s=r(16),l=u(r(0));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r,n){var i=(0,a.default)("datagrid.panel",{trans_id:e});return i+="?is_query_tool=".concat(!0)+"&sgid=".concat(r.server_group._id)+"&sid=".concat(r.server._id)+"&server_type=".concat(r.server.server_type),function(e){return e.database}(r)&&(i+="&did=".concat(r.database._id)),n&&(i+="&sql_id=".concat(n)),i}function c(e,t,r,a,i,o){e.launch_grid(t,r,!0,a,i)||o.alert((0,n.default)("Query tool launch error"),(0,n.default)("Please allow the pop-ups for this site to perform the desired action. If the main window of pgAdmin is closed then close this window and open a new pgAdmin session."))}},82:function(e,t,r){"use strict";r(22),r(92),Object.defineProperty(t,"__esModule",{value:!0}),t.setPGCSRFToken=function(e,t){if(!t)throw"csrf-token meta tag has not been set";var r=a.default.sync;a.default.sync=function(n,a,i){return i.beforeSend=function(r){r.setRequestHeader(e,t)},r(n,a,i)};var o=a.default.get;a.default.get=function(r,n,a){return a.beforeSend=function(r){r.setRequestHeader(e,t)},o(r,n,a)},n.default.ajaxSetup({beforeSend:function(r){r.setRequestHeader(e,t)}}),i.default.interceptors.request.use((function(r){return r.headers[e]=t,r}),(function(e){return Promise.reject(e)}))};var n=o(r(0)),a=o(r(17)),i=o(r(48));function o(e){return e&&e.__esModule?e:{default:e}}},94:function(e,t,r){"use strict";r(7);var n=o(r(0)),a=o(r(1)),i=o(r(26));function o(e){return e&&e.__esModule?e:{default:e}}e.exports={modifyAcitreeAnimation:function(e,t){var r=e.get_preference("browser","enable_acitree_animation").value;a.default.isUndefined(t)&&(t=e.tree),r?t.options({animateRoot:!0,unanimated:!1,show:a.default.extend(t.options().show,{duration:75}),hide:a.default.extend(t.options().hide,{duration:75}),view:a.default.extend(t.options().view,{duration:75})}):t.options({animateRoot:!1,unanimated:!0,show:a.default.extend(t.options().show,{duration:0}),hide:a.default.extend(t.options().hide,{duration:0}),view:a.default.extend(t.options().view,{duration:0})})},modifyAlertifyAnimation:function(e){(a.default.isUndefined(e)||a.default.isNull(e))&&(e=i.default.pgAdmin.Browser),e.get_preference("browser","enable_alertify_animation").value?((0,n.default)(document).find("body").removeClass("alertify-no-animation"),a.default.each(document.getElementsByTagName("iframe"),(function(e){(0,n.default)(e.contentDocument).find("body").removeClass("alertify-no-animation")}))):((0,n.default)(document).find("body").addClass("alertify-no-animation"),a.default.each(document.getElementsByTagName("iframe"),(function(e){(0,n.default)(e.contentDocument).find("body").addClass("alertify-no-animation")})))}}}}).default}));